{"version":3,"file":"box.js","sources":["../node_modules/domready/ready.js","../node_modules/svelte/shared.js","../node_modules/svelte/store.js","../src/RssParser.js","../src/dev.js","../src/settings.js","../src/RssStore.js","../components/Box.html","../src/box.js"],"sourcesContent":["/*!\n  * domready (c) Dustin Diaz 2014 - License MIT\n  */\n!function (name, definition) {\n\n  if (typeof module != 'undefined') module.exports = definition()\n  else if (typeof define == 'function' && typeof define.amd == 'object') define(definition)\n  else this[name] = definition()\n\n}('domready', function () {\n\n  var fns = [], listener\n    , doc = document\n    , hack = doc.documentElement.doScroll\n    , domContentLoaded = 'DOMContentLoaded'\n    , loaded = (hack ? /^loaded|^c/ : /^loaded|^i|^c/).test(doc.readyState)\n\n\n  if (!loaded)\n  doc.addEventListener(domContentLoaded, listener = function () {\n    doc.removeEventListener(domContentLoaded, listener)\n    loaded = 1\n    while (listener = fns.shift()) listener()\n  })\n\n  return function (fn) {\n    loaded ? setTimeout(fn, 0) : fns.push(fn)\n  }\n\n});\n","function noop() {}\n\nfunction assign(target) {\n\tvar k,\n\t\tsource,\n\t\ti = 1,\n\t\tlen = arguments.length;\n\tfor (; i < len; i++) {\n\t\tsource = arguments[i];\n\t\tfor (k in source) target[k] = source[k];\n\t}\n\n\treturn target;\n}\n\nfunction appendNode(node, target) {\n\ttarget.appendChild(node);\n}\n\nfunction insertNode(node, target, anchor) {\n\ttarget.insertBefore(node, anchor);\n}\n\nfunction detachNode(node) {\n\tnode.parentNode.removeChild(node);\n}\n\nfunction detachBetween(before, after) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction detachBefore(after) {\n\twhile (after.previousSibling) {\n\t\tafter.parentNode.removeChild(after.previousSibling);\n\t}\n}\n\nfunction detachAfter(before) {\n\twhile (before.nextSibling) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction reinsertBetween(before, after, target) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\ttarget.appendChild(before.parentNode.removeChild(before.nextSibling));\n\t}\n}\n\nfunction reinsertChildren(parent, target) {\n\twhile (parent.firstChild) target.appendChild(parent.firstChild);\n}\n\nfunction reinsertAfter(before, target) {\n\twhile (before.nextSibling) target.appendChild(before.nextSibling);\n}\n\nfunction reinsertBefore(after, target) {\n\tvar parent = after.parentNode;\n\twhile (parent.firstChild !== after) target.appendChild(parent.firstChild);\n}\n\nfunction destroyEach(iterations) {\n\tfor (var i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d();\n\t}\n}\n\nfunction createFragment() {\n\treturn document.createDocumentFragment();\n}\n\nfunction createElement(name) {\n\treturn document.createElement(name);\n}\n\nfunction createSvgElement(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\nfunction createText(data) {\n\treturn document.createTextNode(data);\n}\n\nfunction createComment() {\n\treturn document.createComment('');\n}\n\nfunction addListener(node, event, handler) {\n\tnode.addEventListener(event, handler, false);\n}\n\nfunction removeListener(node, event, handler) {\n\tnode.removeEventListener(event, handler, false);\n}\n\nfunction setAttribute(node, attribute, value) {\n\tnode.setAttribute(attribute, value);\n}\n\nfunction setXlinkAttribute(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\nfunction getBindingGroupValue(group) {\n\tvar value = [];\n\tfor (var i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.push(group[i].__value);\n\t}\n\treturn value;\n}\n\nfunction toNumber(value) {\n\treturn value === '' ? undefined : +value;\n}\n\nfunction timeRangesToArray(ranges) {\n\tvar array = [];\n\tfor (var i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\nfunction children (element) {\n\treturn Array.from(element.childNodes);\n}\n\nfunction claimElement (nodes, name, attributes, svg) {\n\tfor (var i = 0; i < nodes.length; i += 1) {\n\t\tvar node = nodes[i];\n\t\tif (node.nodeName === name) {\n\t\t\tfor (var j = 0; j < node.attributes.length; j += 1) {\n\t\t\t\tvar attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) node.removeAttribute(attribute.name);\n\t\t\t}\n\t\t\treturn nodes.splice(i, 1)[0]; // TODO strip unwanted attributes\n\t\t}\n\t}\n\n\treturn svg ? createSvgElement(name) : createElement(name);\n}\n\nfunction claimText (nodes, data) {\n\tfor (var i = 0; i < nodes.length; i += 1) {\n\t\tvar node = nodes[i];\n\t\tif (node.nodeType === 3) {\n\t\t\tnode.data = data;\n\t\t\treturn nodes.splice(i, 1)[0];\n\t\t}\n\t}\n\n\treturn createText(data);\n}\n\nfunction setInputType(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {}\n}\n\nfunction setStyle(node, key, value) {\n\tnode.style.setProperty(key, value);\n}\n\nfunction selectOption(select, value) {\n\tfor (var i = 0; i < select.options.length; i += 1) {\n\t\tvar option = select.options[i];\n\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n}\n\nfunction selectOptions(select, value) {\n\tfor (var i = 0; i < select.options.length; i += 1) {\n\t\tvar option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nfunction selectValue(select) {\n\tvar selectedOption = select.querySelector(':checked') || select.options[0];\n\treturn selectedOption && selectedOption.__value;\n}\n\nfunction selectMultipleValue(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), function(option) {\n\t\treturn option.__value;\n\t});\n}\n\nfunction linear(t) {\n\treturn t;\n}\n\nfunction generateRule(\n\ta,\n\tb,\n\tdelta,\n\tduration,\n\tease,\n\tfn\n) {\n\tvar keyframes = '{\\n';\n\n\tfor (var p = 0; p <= 1; p += 16.666 / duration) {\n\t\tvar t = a + delta * ease(p);\n\t\tkeyframes += p * 100 + '%{' + fn(t) + '}\\n';\n\t}\n\n\treturn keyframes + '100% {' + fn(b) + '}\\n}';\n}\n\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n\tvar hash = 5381;\n\tvar i = str.length;\n\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn hash >>> 0;\n}\n\nfunction wrapTransition(component, node, fn, params, intro, outgroup) {\n\tvar obj = fn(node, params);\n\tvar duration = obj.duration || 300;\n\tvar ease = obj.easing || linear;\n\tvar cssText;\n\n\t// TODO share <style> tag between all transitions?\n\tif (obj.css && !transitionManager.stylesheet) {\n\t\tvar style = createElement('style');\n\t\tdocument.head.appendChild(style);\n\t\ttransitionManager.stylesheet = style.sheet;\n\t}\n\n\tif (intro) {\n\t\tif (obj.css && obj.delay) {\n\t\t\tcssText = node.style.cssText;\n\t\t\tnode.style.cssText += obj.css(0);\n\t\t}\n\n\t\tif (obj.tick) obj.tick(0);\n\t}\n\n\treturn {\n\t\tt: intro ? 0 : 1,\n\t\trunning: false,\n\t\tprogram: null,\n\t\tpending: null,\n\t\trun: function(intro, callback) {\n\t\t\tvar program = {\n\t\t\t\tstart: window.performance.now() + (obj.delay || 0),\n\t\t\t\tintro: intro,\n\t\t\t\tcallback: callback\n\t\t\t};\n\n\t\t\tif (obj.delay) {\n\t\t\t\tthis.pending = program;\n\t\t\t} else {\n\t\t\t\tthis.start(program);\n\t\t\t}\n\n\t\t\tif (!this.running) {\n\t\t\t\tthis.running = true;\n\t\t\t\ttransitionManager.add(this);\n\t\t\t}\n\t\t},\n\t\tstart: function(program) {\n\t\t\tcomponent.fire(program.intro ? 'intro.start' : 'outro.start', { node: node });\n\n\t\t\tprogram.a = this.t;\n\t\t\tprogram.b = program.intro ? 1 : 0;\n\t\t\tprogram.delta = program.b - program.a;\n\t\t\tprogram.duration = duration * Math.abs(program.b - program.a);\n\t\t\tprogram.end = program.start + program.duration;\n\n\t\t\tif (obj.css) {\n\t\t\t\tif (obj.delay) node.style.cssText = cssText;\n\n\t\t\t\tprogram.rule = generateRule(\n\t\t\t\t\tprogram.a,\n\t\t\t\t\tprogram.b,\n\t\t\t\t\tprogram.delta,\n\t\t\t\t\tprogram.duration,\n\t\t\t\t\tease,\n\t\t\t\t\tobj.css\n\t\t\t\t);\n\n\t\t\t\ttransitionManager.addRule(program.rule, program.name = '__svelte_' + hash(program.rule));\n\n\t\t\t\tnode.style.animation = (node.style.animation || '')\n\t\t\t\t\t.split(', ')\n\t\t\t\t\t.filter(function(anim) {\n\t\t\t\t\t\t// when introing, discard old animations if there are any\n\t\t\t\t\t\treturn anim && (program.delta < 0 || !/__svelte/.test(anim));\n\t\t\t\t\t})\n\t\t\t\t\t.concat(program.name + ' ' + duration + 'ms linear 1 forwards')\n\t\t\t\t\t.join(', ');\n\t\t\t}\n\n\t\t\tthis.program = program;\n\t\t\tthis.pending = null;\n\t\t},\n\t\tupdate: function(now) {\n\t\t\tvar program = this.program;\n\t\t\tif (!program) return;\n\n\t\t\tvar p = now - program.start;\n\t\t\tthis.t = program.a + program.delta * ease(p / program.duration);\n\t\t\tif (obj.tick) obj.tick(this.t);\n\t\t},\n\t\tdone: function() {\n\t\t\tvar program = this.program;\n\t\t\tthis.t = program.b;\n\t\t\tif (obj.tick) obj.tick(this.t);\n\t\t\tif (obj.css) transitionManager.deleteRule(node, program.name);\n\t\t\tprogram.callback();\n\t\t\tprogram = null;\n\t\t\tthis.running = !!this.pending;\n\t\t},\n\t\tabort: function() {\n\t\t\tif (obj.tick) obj.tick(1);\n\t\t\tif (obj.css) transitionManager.deleteRule(node, this.program.name);\n\t\t\tthis.program = this.pending = null;\n\t\t\tthis.running = false;\n\t\t}\n\t};\n}\n\nvar transitionManager = {\n\trunning: false,\n\ttransitions: [],\n\tbound: null,\n\tstylesheet: null,\n\tactiveRules: {},\n\n\tadd: function(transition) {\n\t\tthis.transitions.push(transition);\n\n\t\tif (!this.running) {\n\t\t\tthis.running = true;\n\t\t\trequestAnimationFrame(this.bound || (this.bound = this.next.bind(this)));\n\t\t}\n\t},\n\n\taddRule: function(rule, name) {\n\t\tif (!this.activeRules[name]) {\n\t\t\tthis.activeRules[name] = true;\n\t\t\tthis.stylesheet.insertRule('@keyframes ' + name + ' ' + rule, this.stylesheet.cssRules.length);\n\t\t}\n\t},\n\n\tnext: function() {\n\t\tthis.running = false;\n\n\t\tvar now = window.performance.now();\n\t\tvar i = this.transitions.length;\n\n\t\twhile (i--) {\n\t\t\tvar transition = this.transitions[i];\n\n\t\t\tif (transition.program && now >= transition.program.end) {\n\t\t\t\ttransition.done();\n\t\t\t}\n\n\t\t\tif (transition.pending && now >= transition.pending.start) {\n\t\t\t\ttransition.start(transition.pending);\n\t\t\t}\n\n\t\t\tif (transition.running) {\n\t\t\t\ttransition.update(now);\n\t\t\t\tthis.running = true;\n\t\t\t} else if (!transition.pending) {\n\t\t\t\tthis.transitions.splice(i, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (this.running) {\n\t\t\trequestAnimationFrame(this.bound);\n\t\t} else if (this.stylesheet) {\n\t\t\tvar i = this.stylesheet.cssRules.length;\n\t\t\twhile (i--) this.stylesheet.deleteRule(i);\n\t\t\tthis.activeRules = {};\n\t\t}\n\t},\n\n\tdeleteRule: function(node, name) {\n\t\tnode.style.animation = node.style.animation\n\t\t\t.split(', ')\n\t\t\t.filter(function(anim) {\n\t\t\t\treturn anim.slice(0, name.length) !== name;\n\t\t\t})\n\t\t\t.join(', ');\n\t}\n};\n\nfunction blankObject() {\n\treturn Object.create(null);\n}\n\nfunction destroy(detach) {\n\tthis.destroy = noop;\n\tthis.fire('destroy');\n\tthis.set = this.get = noop;\n\n\tif (detach !== false) this._fragment.u();\n\tthis._fragment.d();\n\tthis._fragment = this._state = null;\n}\n\nfunction destroyDev(detach) {\n\tdestroy.call(this, detach);\n\tthis.destroy = function() {\n\t\tconsole.warn('Component was already destroyed');\n\t};\n}\n\nfunction differs(a, b) {\n\treturn a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\n\nfunction dispatchObservers(component, group, changed, newState, oldState) {\n\tfor (var key in group) {\n\t\tif (!changed[key]) continue;\n\n\t\tvar newValue = newState[key];\n\t\tvar oldValue = oldState[key];\n\n\t\tvar callbacks = group[key];\n\t\tif (!callbacks) continue;\n\n\t\tfor (var i = 0; i < callbacks.length; i += 1) {\n\t\t\tvar callback = callbacks[i];\n\t\t\tif (callback.__calling) continue;\n\n\t\t\tcallback.__calling = true;\n\t\t\tcallback.call(component, newValue, oldValue);\n\t\t\tcallback.__calling = false;\n\t\t}\n\t}\n}\n\nfunction fire(eventName, data) {\n\tvar handlers =\n\t\teventName in this._handlers && this._handlers[eventName].slice();\n\tif (!handlers) return;\n\n\tfor (var i = 0; i < handlers.length; i += 1) {\n\t\thandlers[i].call(this, data);\n\t}\n}\n\nfunction get(key) {\n\treturn key ? this._state[key] : this._state;\n}\n\nfunction init(component, options) {\n\tcomponent._observers = { pre: blankObject(), post: blankObject() };\n\tcomponent._handlers = blankObject();\n\tcomponent._bind = options._bind;\n\n\tcomponent.options = options;\n\tcomponent.root = options.root || component;\n\tcomponent.store = component.root.store || options.store;\n}\n\nfunction observe(key, callback, options) {\n\tvar group = options && options.defer\n\t\t? this._observers.post\n\t\t: this._observers.pre;\n\n\t(group[key] || (group[key] = [])).push(callback);\n\n\tif (!options || options.init !== false) {\n\t\tcallback.__calling = true;\n\t\tcallback.call(this, this._state[key]);\n\t\tcallback.__calling = false;\n\t}\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = group[key].indexOf(callback);\n\t\t\tif (~index) group[key].splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction observeDev(key, callback, options) {\n\tvar c = (key = '' + key).search(/[^\\w]/);\n\tif (c > -1) {\n\t\tvar message =\n\t\t\t'The first argument to component.observe(...) must be the name of a top-level property';\n\t\tif (c > 0)\n\t\t\tmessage += \", i.e. '\" + key.slice(0, c) + \"' rather than '\" + key + \"'\";\n\n\t\tthrow new Error(message);\n\t}\n\n\treturn observe.call(this, key, callback, options);\n}\n\nfunction on(eventName, handler) {\n\tif (eventName === 'teardown') return this.on('destroy', handler);\n\n\tvar handlers = this._handlers[eventName] || (this._handlers[eventName] = []);\n\thandlers.push(handler);\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = handlers.indexOf(handler);\n\t\t\tif (~index) handlers.splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction onDev(eventName, handler) {\n\tif (eventName === 'teardown') {\n\t\tconsole.warn(\n\t\t\t\"Use component.on('destroy', ...) instead of component.on('teardown', ...) which has been deprecated and will be unsupported in Svelte 2\"\n\t\t);\n\t\treturn this.on('destroy', handler);\n\t}\n\n\treturn on.call(this, eventName, handler);\n}\n\nfunction set(newState) {\n\tthis._set(assign({}, newState));\n\tif (this.root._lock) return;\n\tthis.root._lock = true;\n\tcallAll(this.root._beforecreate);\n\tcallAll(this.root._oncreate);\n\tcallAll(this.root._aftercreate);\n\tthis.root._lock = false;\n}\n\nfunction _set(newState) {\n\tvar oldState = this._state,\n\t\tchanged = {},\n\t\tdirty = false;\n\n\tfor (var key in newState) {\n\t\tif (differs(newState[key], oldState[key])) changed[key] = dirty = true;\n\t}\n\tif (!dirty) return;\n\n\tthis._state = assign({}, oldState, newState);\n\tthis._recompute(changed, this._state);\n\tif (this._bind) this._bind(changed, this._state);\n\n\tif (this._fragment) {\n\t\tdispatchObservers(this, this._observers.pre, changed, this._state, oldState);\n\t\tthis._fragment.p(changed, this._state);\n\t\tdispatchObservers(this, this._observers.post, changed, this._state, oldState);\n\t}\n}\n\nfunction setDev(newState) {\n\tif (typeof newState !== 'object') {\n\t\tthrow new Error(\n\t\t\tthis._debugName + '.set was called without an object of data key-values to update.'\n\t\t);\n\t}\n\n\tthis._checkReadOnly(newState);\n\tset.call(this, newState);\n}\n\nfunction callAll(fns) {\n\twhile (fns && fns.length) fns.pop()();\n}\n\nfunction _mount(target, anchor) {\n\tthis._fragment.m(target, anchor);\n}\n\nfunction _unmount() {\n\tif (this._fragment) this._fragment.u();\n}\n\nfunction isPromise(value) {\n\treturn value && typeof value.then === 'function';\n}\n\nvar PENDING = {};\nvar SUCCESS = {};\nvar FAILURE = {};\n\nfunction removeFromStore() {\n\tthis.store._remove(this);\n}\n\nvar proto = {\n\tdestroy: destroy,\n\tget: get,\n\tfire: fire,\n\tobserve: observe,\n\ton: on,\n\tset: set,\n\tteardown: destroy,\n\t_recompute: noop,\n\t_set: _set,\n\t_mount: _mount,\n\t_unmount: _unmount\n};\n\nvar protoDev = {\n\tdestroy: destroyDev,\n\tget: get,\n\tfire: fire,\n\tobserve: observeDev,\n\ton: onDev,\n\tset: setDev,\n\tteardown: destroyDev,\n\t_recompute: noop,\n\t_set: _set,\n\t_mount: _mount,\n\t_unmount: _unmount\n};\n\nexport { blankObject, destroy, destroyDev, differs, dispatchObservers, fire, get, init, observe, observeDev, on, onDev, set, _set, setDev, callAll, _mount, _unmount, isPromise, PENDING, SUCCESS, FAILURE, removeFromStore, proto, protoDev, appendNode, insertNode, detachNode, detachBetween, detachBefore, detachAfter, reinsertBetween, reinsertChildren, reinsertAfter, reinsertBefore, destroyEach, createFragment, createElement, createSvgElement, createText, createComment, addListener, removeListener, setAttribute, setXlinkAttribute, getBindingGroupValue, toNumber, timeRangesToArray, children, claimElement, claimText, setInputType, setStyle, selectOption, selectOptions, selectValue, selectMultipleValue, linear, generateRule, hash, wrapTransition, transitionManager, noop, assign };\n","import {\n\tassign,\n\tblankObject,\n\tdiffers,\n\tdispatchObservers,\n\tget,\n\tobserve\n} from './shared.js';\n\nfunction Store(state) {\n\tthis._observers = { pre: blankObject(), post: blankObject() };\n\tthis._changeHandlers = [];\n\tthis._dependents = [];\n\n\tthis._computed = blankObject();\n\tthis._sortedComputedProperties = [];\n\n\tthis._state = assign({}, state);\n}\n\nassign(Store.prototype, {\n\t_add: function(component, props) {\n\t\tthis._dependents.push({\n\t\t\tcomponent: component,\n\t\t\tprops: props\n\t\t});\n\t},\n\n\t_init: function(props) {\n\t\tvar state = {};\n\t\tfor (var i = 0; i < props.length; i += 1) {\n\t\t\tvar prop = props[i];\n\t\t\tstate['$' + prop] = this._state[prop];\n\t\t}\n\t\treturn state;\n\t},\n\n\t_remove: function(component) {\n\t\tvar i = this._dependents.length;\n\t\twhile (i--) {\n\t\t\tif (this._dependents[i].component === component) {\n\t\t\t\tthis._dependents.splice(i, 1);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t},\n\n\t_sortComputedProperties: function() {\n\t\tvar computed = this._computed;\n\t\tvar sorted = this._sortedComputedProperties = [];\n\t\tvar cycles;\n\t\tvar visited = blankObject();\n\n\t\tfunction visit(key) {\n\t\t\tif (cycles[key]) {\n\t\t\t\tthrow new Error('Cyclical dependency detected');\n\t\t\t}\n\n\t\t\tif (visited[key]) return;\n\t\t\tvisited[key] = true;\n\n\t\t\tvar c = computed[key];\n\n\t\t\tif (c) {\n\t\t\t\tcycles[key] = true;\n\t\t\t\tc.deps.forEach(visit);\n\t\t\t\tsorted.push(c);\n\t\t\t}\n\t\t}\n\n\t\tfor (var key in this._computed) {\n\t\t\tcycles = blankObject();\n\t\t\tvisit(key);\n\t\t}\n\t},\n\n\tcompute: function(key, deps, fn) {\n\t\tvar store = this;\n\t\tvar value;\n\n\t\tvar c = {\n\t\t\tdeps: deps,\n\t\t\tupdate: function(state, changed, dirty) {\n\t\t\t\tvar values = deps.map(function(dep) {\n\t\t\t\t\tif (dep in changed) dirty = true;\n\t\t\t\t\treturn state[dep];\n\t\t\t\t});\n\n\t\t\t\tif (dirty) {\n\t\t\t\t\tvar newValue = fn.apply(null, values);\n\t\t\t\t\tif (differs(newValue, value)) {\n\t\t\t\t\t\tvalue = newValue;\n\t\t\t\t\t\tchanged[key] = true;\n\t\t\t\t\t\tstate[key] = value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tc.update(this._state, {}, true);\n\n\t\tthis._computed[key] = c;\n\t\tthis._sortComputedProperties();\n\t},\n\n\tget: get,\n\n\tobserve: observe,\n\n\tonchange: function(callback) {\n\t\tthis._changeHandlers.push(callback);\n\t\treturn {\n\t\t\tcancel: function() {\n\t\t\t\tvar index = this._changeHandlers.indexOf(callback);\n\t\t\t\tif (~index) this._changeHandlers.splice(index, 1);\n\t\t\t}\n\t\t};\n\t},\n\n\tset: function(newState) {\n\t\tvar oldState = this._state,\n\t\t\tchanged = this._changed = {},\n\t\t\tdirty = false;\n\n\t\tfor (var key in newState) {\n\t\t\tif (this._computed[key]) throw new Error(\"'\" + key + \"' is a read-only property\");\n\t\t\tif (differs(newState[key], oldState[key])) changed[key] = dirty = true;\n\t\t}\n\t\tif (!dirty) return;\n\n\t\tthis._state = assign({}, oldState, newState);\n\n\t\tfor (var i = 0; i < this._sortedComputedProperties.length; i += 1) {\n\t\t\tthis._sortedComputedProperties[i].update(this._state, changed);\n\t\t}\n\n\t\tfor (var i = 0; i < this._changeHandlers.length; i += 1) {\n\t\t\tthis._changeHandlers[i](this._state, changed);\n\t\t}\n\n\t\tdispatchObservers(this, this._observers.pre, changed, this._state, oldState);\n\n\t\tvar dependents = this._dependents.slice(); // guard against mutations\n\t\tfor (var i = 0; i < dependents.length; i += 1) {\n\t\t\tvar dependent = dependents[i];\n\t\t\tvar componentState = {};\n\t\t\tdirty = false;\n\n\t\t\tfor (var j = 0; j < dependent.props.length; j += 1) {\n\t\t\t\tvar prop = dependent.props[j];\n\t\t\t\tif (prop in changed) {\n\t\t\t\t\tcomponentState['$' + prop] = this._state[prop];\n\t\t\t\t\tdirty = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (dirty) dependent.component.set(componentState);\n\t\t}\n\n\t\tdispatchObservers(this, this._observers.post, changed, this._state, oldState);\n\t}\n});\n\nexport { Store };","function RssParser() {\n  var DC_NAMESPACE = 'http://purl.org/dc/elements/1.1/';\n  var RDF_NAMESPACE = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#';\n  var ISO_DATE_PATTERN = /([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9:]+).*$/;\n\n  var getDocument = function(xml) {\n    if (!xml) return;\n\n    var doc;\n\n    if (document.implementation.createDocument) {\n      var parser = new DOMParser();\n      doc = parser.parseFromString(xml, 'application/xml');\n    } else if (window.ActiveXObject) {\n      doc = new window.ActiveXObject('Microsoft.XMLDOM');\n      doc.async = 'false';\n      doc.loadXML(xml);\n    }\n\n    return doc;\n  };\n\n  var getText = function(node) {\n    if (!node) return '';\n    if (node.length) node = node[0];\n    return node.textContent;\n  };\n\n  var parseRss = function(root, type) {\n    var rss = { items: [] };\n    var channel = root.querySelector('channel');\n\n    rss.format = 'RSS';\n    rss.version = type === 'rdf:RDF' ? '1.0' : root.getAttribute('version');\n    rss.title = getText(root.querySelector('channel > title'));\n    rss.description = getText(root.querySelector('channel > description'));\n    rss.link = getText(root.querySelector('channel > link'));\n\n    var image = root.querySelector('image');\n\n    rss.image = image\n      ? {\n          source: getText(image.querySelector('url')) || image.getAttributeNS(RDF_NAMESPACE, 'resource'),\n          title: getText(image.querySelector('title')),\n          link: getText(image.querySelector('link')),\n          width: getText(image.querySelector('width')),\n          height: getText(image.querySelector('height')),\n          description: getText(image.querySelector('description'))\n        }\n      : '';\n\n    if (type === 'rdf:RDF') {\n      var date = channel.getElementsByTagNameNS(DC_NAMESPACE, 'date');\n      rss.date = getDate(getText(date) /* || data.headers.date*/); // TODO\n      rss.rights = getText(channel.getElementsByTagNameNS(DC_NAMESPACE, 'creator'));\n\n      var textInput = root.querySelector('textinput');\n\n      rss.input = textInput\n        ? {\n            link: getText(textInput.querySelector('link')),\n            description: getText(textInput.querySelector('description')),\n            name: getText(textInput.querySelector('name')),\n            title: getText(textInput.querySelector('title'))\n          }\n        : '';\n    } else {\n      rss.date = getDate(\n        getText(channel.querySelector('lastBuildDate')) ||\n          getText(channel.querySelector('pubDate')) /*||\n        data.headers.date*/ // TODO\n      );\n      rss.rights = getText(channel.querySelector('copyright'));\n    }\n\n    root.querySelectorAll('item').forEach(function(node) {\n      var item = {\n        title: getText(node.querySelector('title')),\n        description: getText(node.querySelector('description')),\n        link: getText(node.querySelector('link')) || getText(node.querySelector('guid'))\n      };\n\n      if (!item.description) {\n        var content = getText(node.querySelector('content\\\\:encoded'));\n        if (content) {\n          item.description = content;\n        } else {\n          content = getText(node.querySelector('encoded'));\n          if (content) {\n            item.description = content;\n          }\n        }\n      }\n\n      addItemExtensions(node, item);\n      rss.items.push(item);\n    });\n\n    return rss;\n  };\n\n  var parseScriptingNews = function(root) {\n    var rss = { items: [] };\n    var channel = root.querySelector('header');\n\n    rss.format = 'Scripting News';\n    rss.version = getText(channel.querySelector('scriptingNewsVersion'));\n    rss.title = getText(channel.querySelector('channelTitle'));\n    rss.description = getText(channel.querySelector('channelDescription'));\n    rss.link = getText(channel.querySelector('channelLink'));\n\n    rss.date = getDate(getText(channel.querySelector('lastBuildDate')) || getText(channel.querySelector('pubDate')));\n\n    var imageUrl = channel.querySelector('imageUrl');\n\n    if (imageUrl) {\n      rss.image = {\n        source: getText(imageUrl),\n        title: getText(channel.querySelector('imageTitle')),\n        link: getText(channel.querySelector('imageLink')),\n        width: getText(channel.querySelector('imageWidth')),\n        height: getText(channel.querySelector('imageHeight')),\n        description: getText(channel.querySelector('imageCaption'))\n      };\n    }\n\n    root.querySelectorAll('item').forEach(function(node) {\n      var item = { title: '' };\n\n      item.description = getText(node.querySelector('text')).replace(/\\n/g, ' ');\n\n      var link = node.querySelector('link');\n\n      if (link) {\n        var text = getText(link.querySelector('linetext'))\n          .replace(/\\n/g, ' ')\n          .trim();\n        if (text) {\n          item.description = item.description.replace(\n            new RegExp(text),\n            '<a href=\"' + getText(node.querySelector('url')) + '\">' + text + '</a>'\n          );\n        }\n        item.link = getText(link.querySelector('url'));\n      }\n\n      addItemExtensions(node, item);\n      rss.items.push(item);\n    });\n\n    return rss;\n  };\n\n  var addItemExtensions = function(node, item) {\n    var source = node.querySelector('source');\n    var enclosure = node.querySelector('enclosure');\n    var category = node.querySelector('category');\n\n    if (source) {\n      item.source = {\n        link: source.getAttribute('url'),\n        title: source.textContent\n      };\n    }\n\n    if (enclosure) {\n      item.enclosure = {\n        link: enclosure.getAttribute('url'),\n        length: enclosure.getAttribute('length'),\n        type: enclosure.getAttribute('type')\n      };\n    }\n\n    if (category) {\n      item.category = {\n        domain: category.getAttribute('domain') || '',\n        content: category.textContent\n      };\n    }\n\n    // TODO\n    item.buttons = [];\n\n    return item;\n  };\n\n  var getDate = function(str) {\n    var millis = Date.parse(str);\n\n    if (isNaN(millis)) {\n      millis = Date.parse(String(str).replace(ISO_DATE_PATTERN, '$1/$2/$3 $4'));\n      if (isNaN(millis)) millis = Date.now();\n    }\n\n    return new Date(millis);\n  };\n\n  return {\n    parse: function(xml) {\n      var doc = getDocument(xml);\n      var root = doc.documentElement;\n      var type = root.nodeName;\n\n      return type === 'scriptingNews' ? parseScriptingNews(root) : parseRss(root, type);\n    }\n  };\n}\n\nexport { RssParser };\n","export const URLS = {\n  base: 'http://localhost:5000',\n  roxy: 'http://localhost:8081/roxy',\n  ferris: 'http://localhost:8081/ferris?group=rssbox'\n};\n","import { URLS as DEV_URLS } from './dev';\n\nexport const defaults = {\n  boxFillColor: '#fff',\n  compact: false,\n  fontFace: '10pt sans-serif',\n  frameColor: '#000',\n  headless: false,\n  height: -1,\n  linkColor: '',\n  maxItems: 7,\n  radius: 0,\n  showXmlButton: true,\n  textColor: '#000',\n  titleBarColor: '#add8e6',\n  titleBarTextColor: '#000',\n  url: 'https://blog.p3k.org/stories.xml',\n  width: 200\n};\n\nexport const KEYS = [\n  'align',\n  'boxFillColor',\n  'compact',\n  'fontFace',\n  'frameColor',\n  'headless',\n  'height',\n  'linkColor',\n  'maxItems',\n  'radius',\n  'showXmlButton',\n  'textColor',\n  'titleBarColor',\n  'titleBarTextColor',\n  'url',\n  'width'\n];\n\nexport const URLS = Object.assign(\n  {\n    base: '//p3k.org/rss',\n    roxy: location.protocol + '//p3k-services.appspot.com/roxy',\n    ferris: location.protocol + '//p3k-services.appspot.com/ferris?callback=?&group=rssbox'\n  },\n  DEV_URLS\n);\n","import { Store } from 'svelte/store';\nimport { RssParser } from './RssParser';\nimport { URLS } from './settings';\n\nexport default class RssStore extends Store {\n  constructor(url) {\n    const defaults = {\n      date: new Date(),\n      description: '',\n      format: '',\n      image: '',\n      input: '',\n      items: [],\n      title: '',\n      url: url || '',\n      version: ''\n    };\n\n    super(defaults);\n\n    this.compute('formattedDate', ['date'], date => {\n      if (!date) return;\n      let month = (date.getMonth() + 1).toString().padStart(2, '0');\n      let day = date\n        .getDate()\n        .toString()\n        .padStart(2, '0');\n      let hours = date\n        .getHours()\n        .toString()\n        .padStart(2, '0');\n      let minutes = date\n        .getMinutes()\n        .toString()\n        .padStart(2, '0');\n      return `${date.getFullYear()}-${month}-${day}, ${hours}:${minutes}h`;\n    });\n\n    this.observe('url', this.fetch);\n  }\n\n  fetch() {\n    const url = this.get('url');\n    if (!url) return;\n\n    fetch(URLS.roxy + '?url=' + encodeURIComponent(url)).then(res => {\n      res.text().then(json => {\n        const parser = RssParser();\n        const xml = JSON.parse(json).content;\n        const data = parser.parse(xml);\n        this.set(data);\n      });\n    });\n  }\n}\n","<div data-link-color='{{ $linkColor }}' class='rssbox rssBox' style='width: {{ $width }}px;\n    border-color: {{ $frameColor }};\n    border-radius: {{ $radius }}px;\n    font: {{ $fontFace }};'>\n  {{ #if !$headless }}\n    <div class='rssbox-titlebar' style='color: {{ $titleBarTextColor }};\n        background-color: {{ $titleBarColor }};\n        border-bottom-color: {{ $frameColor }};'>\n      {{ #if $showXmlButton }}\n        <div style='float: right;'>\n          <a href='{{ $url }}'>\n            <span class='rssbox-icon' title='{{ $format }} {{ $version }}'></span>\n          </a>\n        </div>\n      {{ /if }}\n      <div>\n        <a href='{{ $link }}' style='color: {{ $titleBarTextColor }};'>\n          {{ $title }}\n        </a>\n      </div>\n      <div class='rssbox-date'>\n        {{ $formattedDate }}\n      </div>\n    </div>\n  {{ /if }}\n  <div class='rssbox-content rssBoxContent' style='background-color: {{ $boxFillColor }};\n      height: {{ height }};'>\n    {{ #if $image }}\n      <a href='{{ $image.link }}' title='{{ $image.title }}'>\n        <span alt='{{ $image.description }}' class='rssbox-image'\n            style='background-image: url({{ $image.source }});\n            width: {{ $image.width }}px;\n            height: {{ $image.height }}px;'></span>\n      </a>\n    {{ /if }}\n    {{ #each $items as item, index }}\n      {{ #if index < $maxItems }}\n        <div class='rssbox-item-content rssBoxItemContent' style='color: {{ $textColor }}'>\n          <div style='font-weight: {{ $fontWeight }};'>\n            <a href='{{ item.link }}' style='color: {{ $textColor }}'>\n              {{ item.title }}\n            </a>\n          </div>\n          {{ #if !$compact }}\n            {{{ item.description }}}\n            {{ item.buttons }}\n          {{ /if }}\n        </div>\n      {{ /if }}\n    {{ /each }}\n    {{ #if $input }}\n      TODO\n    {{ /if }}\n    <div class='rssbox-promo rssBoxPromo'>\n      <a href='http://p3k.org/rss'>RSS Box by p3k.org</a>\n    </div>\n  </div>\n</div>\n\n<style>\n  .rssbox {\n    width: 200px;\n    border: 1px solid #000;\n    font: sans-serif;\n    float: left;\n    overflow: hidden;\n    border-radius: 0;\n    -moz-border-radius: 0;\n  }\n\n  .rssbox-icon, .rssbox-image {\n    display: inline-block;\n    float: right;\n    margin: 5px 0 5px 5px;\n    background-position: left center;\n    background-repeat: no-repeat;\n  }\n\n  .rssbox-icon {\n    height: 16px;\n    width: 16px;\n    margin: 1px 4px;\n    background-image: url(img/rss.png);\n    background-size: 16px 16px;\n  }\n\n  .rssbox-titlebar {\n    padding: 5px 3px 5px 10px;\n    color: #000;\n    background-color: #add8e6;\n    border-bottom: 1px solid #000;\n    font-weight: bold;\n  }\n\n  .rssbox-content {\n    height: auto;\n    padding: 5px 10px;\n    overflow-x: hidden;\n    overflow-y: auto;\n    background-color: #fff;\n    clear: both;\n  }\n\n  .rssbox-item form {\n    margin-bottom: 0.8em;\n  }\n\n  .rssbox-date {\n    margin-top: 1px;\n    font-size: 80%;\n  }\n\n  .rssbox-promo {\n    margin: 0 -5px -1px 0;\n    text-align: right;\n    font-size: 7pt;\n    letter-spacing: 0.5px;\n  }\n</style>\n\n<script>\n  export default {\n    oncreate() {\n      this.store.observe('compact', compact => {\n        this.store.set({ fontWeight: compact ?  'initial' : 'bold' });\n      });\n\n      let id = 'rssbox-dynamic-stylesheet';\n      let css = window[id];\n\n      if (!css) {\n        css = document.createElement('style');\n        css.id = id;\n        css.innerHTML = `\n          .rssbox * {\n            box-sizing: border-box;\n            margin: 0;\n            padding: 0;\n          }\n\n          .rssbox a {\n            text-decoration: none;\n          }\n\n          .rssbox a:hover {\n            text-decoration: underline;\n          }\n\n          .rssbox-titlebar a {\n            color: #000;\n          }\n\n          .rssbox-content p, .rssbox-content img {\n            margin-top: 0.5em;\n          }\n\n          .rssbox-content img {\n            width: 100% !important;\n            height: auto ;\n          }\n\n          .rssbox-content figcaption {\n            font-size: 0.8em;\n          }\n\n          .rssbox-item-content {\n            margin-bottom: 0.8em;\n          }`;\n        document.head.append(css);\n      }\n\n      this.store.observe('linkColor', color => {\n        if (!color) return;\n\n        let rule =\n          `.rssbox[data-link-color=\"${color}\"] .rssbox-item-content a {\n            color: ${color};\n          }`;\n\n        if (css.innerHTML.indexOf(rule) < 0) css.innerHTML += rule;\n      });\n    },\n\n    computed: {\n      height: $height => $height > -1 ? $height + 'px' : '100%'\n    }\n  };\n</script>\n","import ready from 'domready';\n\nimport RssStore from '../src/RssStore';\nimport Box from '../components/Box.html';\nimport { defaults } from '../src/settings';\n\nconst getNativeValue = value => {\n  if (value === 'true') return true;\n  if (value === 'false') return false;\n  return value;\n};\n\nconst parseQuery = query => {\n  let parts = query.split('&');\n  return parts.reduce((data, pair) => {\n    let [key, value] = pair.split('=');\n    data[key] = getNativeValue(decodeURIComponent(value));\n    return data;\n  }, {});\n};\n\nready(() => {\n  let re = /https?:\\/\\/[^/]+\\/main\\.js/;\n  let filter = Array.prototype.filter;\n  let scripts = filter.call(document.scripts, script => script.src && script.src.match(re));\n\n  scripts.forEach(script => {\n    let query = script.src.split(re)[1].substr(1);\n    let data = parseQuery(query);\n\n    data = Object.assign({}, defaults, data);\n\n    const store = new RssStore(data.url);\n    store.set(data);\n\n    let parent = script.parentNode;\n    let container = document.createElement('div');\n    parent.insertBefore(container, script);\n\n    void new Box({\n      target: container,\n      store\n    });\n\n    script.remove();\n  });\n});\n"],"names":["module","listener","fns","doc","document","domContentLoaded","loaded","documentElement","doScroll","test","readyState","addEventListener","removeEventListener","shift","fn","setTimeout","push","definition","noop","assign","target","k","source","i","len","arguments","length","appendNode","node","appendChild","insertNode","anchor","insertBefore","detachNode","parentNode","removeChild","detachBetween","before","after","nextSibling","createElement","name","createText","data","createTextNode","setAttribute","attribute","value","setStyle","key","style","setProperty","blankObject","Object","create","destroy","detach","this","fire","set","get","_fragment","u","d","_state","differs","a","b","dispatchObservers","component","group","changed","newState","oldState","newValue","oldValue","callbacks","callback","__calling","call","observe","options","defer","_observers","post","pre","init","cancel","index","indexOf","splice","callAll","pop","removeFromStore","store","_remove","proto","eventName","handlers","_handlers","slice","on","handler","_set","root","_lock","_beforecreate","_oncreate","_aftercreate","teardown","_recompute","dirty","_bind","p","_mount","m","_unmount","Store","state","_changeHandlers","_dependents","_computed","_sortedComputedProperties","prototype","_add","props","_init","prop","_sortComputedProperties","cycles","computed","sorted","visited","visit","Error","c","deps","forEach","compute","update","values","map","dep","apply","onchange","_changed","dependents","dependent","componentState","j","RssParser","DC_NAMESPACE","ISO_DATE_PATTERN","getText","textContent","addItemExtensions","item","querySelector","enclosure","category","link","getAttribute","title","type","domain","content","buttons","getDate","str","millis","Date","parse","isNaN","String","replace","now","xml","implementation","createDocument","DOMParser","parseFromString","window","ActiveXObject","async","loadXML","getDocument","nodeName","rss","items","channel","format","version","description","date","imageUrl","image","width","height","querySelectorAll","text","trim","RegExp","parseScriptingNews","getAttributeNS","getElementsByTagNameNS","rights","textInput","input","parseRss","const","defaults","boxFillColor","compact","fontFace","frameColor","headless","linkColor","maxItems","radius","showXmlButton","textColor","titleBarColor","titleBarTextColor","url","URLS","base","roxy","location","protocol","ferris","RssStore","super","let","month","getMonth","toString","padStart","day","hours","getHours","minutes","getMinutes","getFullYear","fetch","encodeURIComponent","then","res","json","parser","JSON","$format","$version","$url","$title","$formattedDate","$link","$titleBarTextColor","$titleBarColor","$frameColor","$showXmlButton","$image","$maxItems","createComment","$compact","$textColor","$fontWeight","fontWeight","id","css","innerHTML","head","append","color","rule","$headless","$items","$boxFillColor","$linkColor","$width","$radius","$fontFace","$input","iterations","$height","ready","re","Array","filter","scripts","script","src","match","query","split","substr","reduce","pair","decodeURIComponent","parent","container","Box","remove"],"mappings":"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"}
{"version":3,"file":"app.js","sources":["../node_modules/svelte/shared.js","../node_modules/svelte/store.js","../src/RssParser.js","../src/local.js","../src/settings.js","../src/error.js","../src/RssStore.js","../components/Github.html","../components/About.html","../components/Ad.html","../components/Box.html","../components/Referrers.html","../components/Configurator.html","../src/polyfill.io.js","../src/app.js"],"sourcesContent":["function noop() {}\n\nfunction assign(target) {\n\tvar k,\n\t\tsource,\n\t\ti = 1,\n\t\tlen = arguments.length;\n\tfor (; i < len; i++) {\n\t\tsource = arguments[i];\n\t\tfor (k in source) target[k] = source[k];\n\t}\n\n\treturn target;\n}\n\nfunction appendNode(node, target) {\n\ttarget.appendChild(node);\n}\n\nfunction insertNode(node, target, anchor) {\n\ttarget.insertBefore(node, anchor);\n}\n\nfunction detachNode(node) {\n\tnode.parentNode.removeChild(node);\n}\n\nfunction detachBetween(before, after) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction detachBefore(after) {\n\twhile (after.previousSibling) {\n\t\tafter.parentNode.removeChild(after.previousSibling);\n\t}\n}\n\nfunction detachAfter(before) {\n\twhile (before.nextSibling) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction reinsertBetween(before, after, target) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\ttarget.appendChild(before.parentNode.removeChild(before.nextSibling));\n\t}\n}\n\nfunction reinsertChildren(parent, target) {\n\twhile (parent.firstChild) target.appendChild(parent.firstChild);\n}\n\nfunction reinsertAfter(before, target) {\n\twhile (before.nextSibling) target.appendChild(before.nextSibling);\n}\n\nfunction reinsertBefore(after, target) {\n\tvar parent = after.parentNode;\n\twhile (parent.firstChild !== after) target.appendChild(parent.firstChild);\n}\n\nfunction destroyEach(iterations) {\n\tfor (var i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d();\n\t}\n}\n\nfunction createFragment() {\n\treturn document.createDocumentFragment();\n}\n\nfunction createElement(name) {\n\treturn document.createElement(name);\n}\n\nfunction createSvgElement(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\nfunction createText(data) {\n\treturn document.createTextNode(data);\n}\n\nfunction createComment() {\n\treturn document.createComment('');\n}\n\nfunction addListener(node, event, handler) {\n\tnode.addEventListener(event, handler, false);\n}\n\nfunction removeListener(node, event, handler) {\n\tnode.removeEventListener(event, handler, false);\n}\n\nfunction setAttribute(node, attribute, value) {\n\tnode.setAttribute(attribute, value);\n}\n\nfunction setXlinkAttribute(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\nfunction getBindingGroupValue(group) {\n\tvar value = [];\n\tfor (var i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.push(group[i].__value);\n\t}\n\treturn value;\n}\n\nfunction toNumber(value) {\n\treturn value === '' ? undefined : +value;\n}\n\nfunction timeRangesToArray(ranges) {\n\tvar array = [];\n\tfor (var i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\nfunction children (element) {\n\treturn Array.from(element.childNodes);\n}\n\nfunction claimElement (nodes, name, attributes, svg) {\n\tfor (var i = 0; i < nodes.length; i += 1) {\n\t\tvar node = nodes[i];\n\t\tif (node.nodeName === name) {\n\t\t\tfor (var j = 0; j < node.attributes.length; j += 1) {\n\t\t\t\tvar attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) node.removeAttribute(attribute.name);\n\t\t\t}\n\t\t\treturn nodes.splice(i, 1)[0]; // TODO strip unwanted attributes\n\t\t}\n\t}\n\n\treturn svg ? createSvgElement(name) : createElement(name);\n}\n\nfunction claimText (nodes, data) {\n\tfor (var i = 0; i < nodes.length; i += 1) {\n\t\tvar node = nodes[i];\n\t\tif (node.nodeType === 3) {\n\t\t\tnode.data = data;\n\t\t\treturn nodes.splice(i, 1)[0];\n\t\t}\n\t}\n\n\treturn createText(data);\n}\n\nfunction setInputType(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {}\n}\n\nfunction setStyle(node, key, value) {\n\tnode.style.setProperty(key, value);\n}\n\nfunction selectOption(select, value) {\n\tfor (var i = 0; i < select.options.length; i += 1) {\n\t\tvar option = select.options[i];\n\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n}\n\nfunction selectOptions(select, value) {\n\tfor (var i = 0; i < select.options.length; i += 1) {\n\t\tvar option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nfunction selectValue(select) {\n\tvar selectedOption = select.querySelector(':checked') || select.options[0];\n\treturn selectedOption && selectedOption.__value;\n}\n\nfunction selectMultipleValue(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), function(option) {\n\t\treturn option.__value;\n\t});\n}\n\nfunction linear(t) {\n\treturn t;\n}\n\nfunction generateRule(\n\ta,\n\tb,\n\tdelta,\n\tduration,\n\tease,\n\tfn\n) {\n\tvar keyframes = '{\\n';\n\n\tfor (var p = 0; p <= 1; p += 16.666 / duration) {\n\t\tvar t = a + delta * ease(p);\n\t\tkeyframes += p * 100 + '%{' + fn(t) + '}\\n';\n\t}\n\n\treturn keyframes + '100% {' + fn(b) + '}\\n}';\n}\n\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n\tvar hash = 5381;\n\tvar i = str.length;\n\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn hash >>> 0;\n}\n\nfunction wrapTransition(component, node, fn, params, intro, outgroup) {\n\tvar obj = fn(node, params);\n\tvar duration = obj.duration || 300;\n\tvar ease = obj.easing || linear;\n\tvar cssText;\n\n\t// TODO share <style> tag between all transitions?\n\tif (obj.css && !transitionManager.stylesheet) {\n\t\tvar style = createElement('style');\n\t\tdocument.head.appendChild(style);\n\t\ttransitionManager.stylesheet = style.sheet;\n\t}\n\n\tif (intro) {\n\t\tif (obj.css && obj.delay) {\n\t\t\tcssText = node.style.cssText;\n\t\t\tnode.style.cssText += obj.css(0);\n\t\t}\n\n\t\tif (obj.tick) obj.tick(0);\n\t}\n\n\treturn {\n\t\tt: intro ? 0 : 1,\n\t\trunning: false,\n\t\tprogram: null,\n\t\tpending: null,\n\t\trun: function(intro, callback) {\n\t\t\tvar program = {\n\t\t\t\tstart: window.performance.now() + (obj.delay || 0),\n\t\t\t\tintro: intro,\n\t\t\t\tcallback: callback\n\t\t\t};\n\n\t\t\tif (obj.delay) {\n\t\t\t\tthis.pending = program;\n\t\t\t} else {\n\t\t\t\tthis.start(program);\n\t\t\t}\n\n\t\t\tif (!this.running) {\n\t\t\t\tthis.running = true;\n\t\t\t\ttransitionManager.add(this);\n\t\t\t}\n\t\t},\n\t\tstart: function(program) {\n\t\t\tcomponent.fire(program.intro ? 'intro.start' : 'outro.start', { node: node });\n\n\t\t\tprogram.a = this.t;\n\t\t\tprogram.b = program.intro ? 1 : 0;\n\t\t\tprogram.delta = program.b - program.a;\n\t\t\tprogram.duration = duration * Math.abs(program.b - program.a);\n\t\t\tprogram.end = program.start + program.duration;\n\n\t\t\tif (obj.css) {\n\t\t\t\tif (obj.delay) node.style.cssText = cssText;\n\n\t\t\t\tprogram.rule = generateRule(\n\t\t\t\t\tprogram.a,\n\t\t\t\t\tprogram.b,\n\t\t\t\t\tprogram.delta,\n\t\t\t\t\tprogram.duration,\n\t\t\t\t\tease,\n\t\t\t\t\tobj.css\n\t\t\t\t);\n\n\t\t\t\ttransitionManager.addRule(program.rule, program.name = '__svelte_' + hash(program.rule));\n\n\t\t\t\tnode.style.animation = (node.style.animation || '')\n\t\t\t\t\t.split(', ')\n\t\t\t\t\t.filter(function(anim) {\n\t\t\t\t\t\t// when introing, discard old animations if there are any\n\t\t\t\t\t\treturn anim && (program.delta < 0 || !/__svelte/.test(anim));\n\t\t\t\t\t})\n\t\t\t\t\t.concat(program.name + ' ' + duration + 'ms linear 1 forwards')\n\t\t\t\t\t.join(', ');\n\t\t\t}\n\n\t\t\tthis.program = program;\n\t\t\tthis.pending = null;\n\t\t},\n\t\tupdate: function(now) {\n\t\t\tvar program = this.program;\n\t\t\tif (!program) return;\n\n\t\t\tvar p = now - program.start;\n\t\t\tthis.t = program.a + program.delta * ease(p / program.duration);\n\t\t\tif (obj.tick) obj.tick(this.t);\n\t\t},\n\t\tdone: function() {\n\t\t\tvar program = this.program;\n\t\t\tthis.t = program.b;\n\t\t\tif (obj.tick) obj.tick(this.t);\n\t\t\tif (obj.css) transitionManager.deleteRule(node, program.name);\n\t\t\tprogram.callback();\n\t\t\tprogram = null;\n\t\t\tthis.running = !!this.pending;\n\t\t},\n\t\tabort: function() {\n\t\t\tif (obj.tick) obj.tick(1);\n\t\t\tif (obj.css) transitionManager.deleteRule(node, this.program.name);\n\t\t\tthis.program = this.pending = null;\n\t\t\tthis.running = false;\n\t\t}\n\t};\n}\n\nvar transitionManager = {\n\trunning: false,\n\ttransitions: [],\n\tbound: null,\n\tstylesheet: null,\n\tactiveRules: {},\n\n\tadd: function(transition) {\n\t\tthis.transitions.push(transition);\n\n\t\tif (!this.running) {\n\t\t\tthis.running = true;\n\t\t\trequestAnimationFrame(this.bound || (this.bound = this.next.bind(this)));\n\t\t}\n\t},\n\n\taddRule: function(rule, name) {\n\t\tif (!this.activeRules[name]) {\n\t\t\tthis.activeRules[name] = true;\n\t\t\tthis.stylesheet.insertRule('@keyframes ' + name + ' ' + rule, this.stylesheet.cssRules.length);\n\t\t}\n\t},\n\n\tnext: function() {\n\t\tthis.running = false;\n\n\t\tvar now = window.performance.now();\n\t\tvar i = this.transitions.length;\n\n\t\twhile (i--) {\n\t\t\tvar transition = this.transitions[i];\n\n\t\t\tif (transition.program && now >= transition.program.end) {\n\t\t\t\ttransition.done();\n\t\t\t}\n\n\t\t\tif (transition.pending && now >= transition.pending.start) {\n\t\t\t\ttransition.start(transition.pending);\n\t\t\t}\n\n\t\t\tif (transition.running) {\n\t\t\t\ttransition.update(now);\n\t\t\t\tthis.running = true;\n\t\t\t} else if (!transition.pending) {\n\t\t\t\tthis.transitions.splice(i, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (this.running) {\n\t\t\trequestAnimationFrame(this.bound);\n\t\t} else if (this.stylesheet) {\n\t\t\tvar i = this.stylesheet.cssRules.length;\n\t\t\twhile (i--) this.stylesheet.deleteRule(i);\n\t\t\tthis.activeRules = {};\n\t\t}\n\t},\n\n\tdeleteRule: function(node, name) {\n\t\tnode.style.animation = node.style.animation\n\t\t\t.split(', ')\n\t\t\t.filter(function(anim) {\n\t\t\t\treturn anim.slice(0, name.length) !== name;\n\t\t\t})\n\t\t\t.join(', ');\n\t}\n};\n\nfunction blankObject() {\n\treturn Object.create(null);\n}\n\nfunction destroy(detach) {\n\tthis.destroy = noop;\n\tthis.fire('destroy');\n\tthis.set = this.get = noop;\n\n\tif (detach !== false) this._fragment.u();\n\tthis._fragment.d();\n\tthis._fragment = this._state = null;\n}\n\nfunction destroyDev(detach) {\n\tdestroy.call(this, detach);\n\tthis.destroy = function() {\n\t\tconsole.warn('Component was already destroyed');\n\t};\n}\n\nfunction differs(a, b) {\n\treturn a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\n\nfunction dispatchObservers(component, group, changed, newState, oldState) {\n\tfor (var key in group) {\n\t\tif (!changed[key]) continue;\n\n\t\tvar newValue = newState[key];\n\t\tvar oldValue = oldState[key];\n\n\t\tvar callbacks = group[key];\n\t\tif (!callbacks) continue;\n\n\t\tfor (var i = 0; i < callbacks.length; i += 1) {\n\t\t\tvar callback = callbacks[i];\n\t\t\tif (callback.__calling) continue;\n\n\t\t\tcallback.__calling = true;\n\t\t\tcallback.call(component, newValue, oldValue);\n\t\t\tcallback.__calling = false;\n\t\t}\n\t}\n}\n\nfunction fire(eventName, data) {\n\tvar handlers =\n\t\teventName in this._handlers && this._handlers[eventName].slice();\n\tif (!handlers) return;\n\n\tfor (var i = 0; i < handlers.length; i += 1) {\n\t\thandlers[i].call(this, data);\n\t}\n}\n\nfunction get(key) {\n\treturn key ? this._state[key] : this._state;\n}\n\nfunction init(component, options) {\n\tcomponent._observers = { pre: blankObject(), post: blankObject() };\n\tcomponent._handlers = blankObject();\n\tcomponent._bind = options._bind;\n\n\tcomponent.options = options;\n\tcomponent.root = options.root || component;\n\tcomponent.store = component.root.store || options.store;\n}\n\nfunction observe(key, callback, options) {\n\tvar group = options && options.defer\n\t\t? this._observers.post\n\t\t: this._observers.pre;\n\n\t(group[key] || (group[key] = [])).push(callback);\n\n\tif (!options || options.init !== false) {\n\t\tcallback.__calling = true;\n\t\tcallback.call(this, this._state[key]);\n\t\tcallback.__calling = false;\n\t}\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = group[key].indexOf(callback);\n\t\t\tif (~index) group[key].splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction observeDev(key, callback, options) {\n\tvar c = (key = '' + key).search(/[^\\w]/);\n\tif (c > -1) {\n\t\tvar message =\n\t\t\t'The first argument to component.observe(...) must be the name of a top-level property';\n\t\tif (c > 0)\n\t\t\tmessage += \", i.e. '\" + key.slice(0, c) + \"' rather than '\" + key + \"'\";\n\n\t\tthrow new Error(message);\n\t}\n\n\treturn observe.call(this, key, callback, options);\n}\n\nfunction on(eventName, handler) {\n\tif (eventName === 'teardown') return this.on('destroy', handler);\n\n\tvar handlers = this._handlers[eventName] || (this._handlers[eventName] = []);\n\thandlers.push(handler);\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = handlers.indexOf(handler);\n\t\t\tif (~index) handlers.splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction onDev(eventName, handler) {\n\tif (eventName === 'teardown') {\n\t\tconsole.warn(\n\t\t\t\"Use component.on('destroy', ...) instead of component.on('teardown', ...) which has been deprecated and will be unsupported in Svelte 2\"\n\t\t);\n\t\treturn this.on('destroy', handler);\n\t}\n\n\treturn on.call(this, eventName, handler);\n}\n\nfunction set(newState) {\n\tthis._set(assign({}, newState));\n\tif (this.root._lock) return;\n\tthis.root._lock = true;\n\tcallAll(this.root._beforecreate);\n\tcallAll(this.root._oncreate);\n\tcallAll(this.root._aftercreate);\n\tthis.root._lock = false;\n}\n\nfunction _set(newState) {\n\tvar oldState = this._state,\n\t\tchanged = {},\n\t\tdirty = false;\n\n\tfor (var key in newState) {\n\t\tif (differs(newState[key], oldState[key])) changed[key] = dirty = true;\n\t}\n\tif (!dirty) return;\n\n\tthis._state = assign({}, oldState, newState);\n\tthis._recompute(changed, this._state);\n\tif (this._bind) this._bind(changed, this._state);\n\n\tif (this._fragment) {\n\t\tdispatchObservers(this, this._observers.pre, changed, this._state, oldState);\n\t\tthis._fragment.p(changed, this._state);\n\t\tdispatchObservers(this, this._observers.post, changed, this._state, oldState);\n\t}\n}\n\nfunction setDev(newState) {\n\tif (typeof newState !== 'object') {\n\t\tthrow new Error(\n\t\t\tthis._debugName + '.set was called without an object of data key-values to update.'\n\t\t);\n\t}\n\n\tthis._checkReadOnly(newState);\n\tset.call(this, newState);\n}\n\nfunction callAll(fns) {\n\twhile (fns && fns.length) fns.pop()();\n}\n\nfunction _mount(target, anchor) {\n\tthis._fragment.m(target, anchor);\n}\n\nfunction _unmount() {\n\tif (this._fragment) this._fragment.u();\n}\n\nfunction isPromise(value) {\n\treturn value && typeof value.then === 'function';\n}\n\nvar PENDING = {};\nvar SUCCESS = {};\nvar FAILURE = {};\n\nfunction removeFromStore() {\n\tthis.store._remove(this);\n}\n\nvar proto = {\n\tdestroy: destroy,\n\tget: get,\n\tfire: fire,\n\tobserve: observe,\n\ton: on,\n\tset: set,\n\tteardown: destroy,\n\t_recompute: noop,\n\t_set: _set,\n\t_mount: _mount,\n\t_unmount: _unmount\n};\n\nvar protoDev = {\n\tdestroy: destroyDev,\n\tget: get,\n\tfire: fire,\n\tobserve: observeDev,\n\ton: onDev,\n\tset: setDev,\n\tteardown: destroyDev,\n\t_recompute: noop,\n\t_set: _set,\n\t_mount: _mount,\n\t_unmount: _unmount\n};\n\nexport { blankObject, destroy, destroyDev, differs, dispatchObservers, fire, get, init, observe, observeDev, on, onDev, set, _set, setDev, callAll, _mount, _unmount, isPromise, PENDING, SUCCESS, FAILURE, removeFromStore, proto, protoDev, appendNode, insertNode, detachNode, detachBetween, detachBefore, detachAfter, reinsertBetween, reinsertChildren, reinsertAfter, reinsertBefore, destroyEach, createFragment, createElement, createSvgElement, createText, createComment, addListener, removeListener, setAttribute, setXlinkAttribute, getBindingGroupValue, toNumber, timeRangesToArray, children, claimElement, claimText, setInputType, setStyle, selectOption, selectOptions, selectValue, selectMultipleValue, linear, generateRule, hash, wrapTransition, transitionManager, noop, assign };\n","import {\n\tassign,\n\tblankObject,\n\tdiffers,\n\tdispatchObservers,\n\tget,\n\tobserve\n} from './shared.js';\n\nfunction Store(state) {\n\tthis._observers = { pre: blankObject(), post: blankObject() };\n\tthis._changeHandlers = [];\n\tthis._dependents = [];\n\n\tthis._computed = blankObject();\n\tthis._sortedComputedProperties = [];\n\n\tthis._state = assign({}, state);\n}\n\nassign(Store.prototype, {\n\t_add: function(component, props) {\n\t\tthis._dependents.push({\n\t\t\tcomponent: component,\n\t\t\tprops: props\n\t\t});\n\t},\n\n\t_init: function(props) {\n\t\tvar state = {};\n\t\tfor (var i = 0; i < props.length; i += 1) {\n\t\t\tvar prop = props[i];\n\t\t\tstate['$' + prop] = this._state[prop];\n\t\t}\n\t\treturn state;\n\t},\n\n\t_remove: function(component) {\n\t\tvar i = this._dependents.length;\n\t\twhile (i--) {\n\t\t\tif (this._dependents[i].component === component) {\n\t\t\t\tthis._dependents.splice(i, 1);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t},\n\n\t_sortComputedProperties: function() {\n\t\tvar computed = this._computed;\n\t\tvar sorted = this._sortedComputedProperties = [];\n\t\tvar cycles;\n\t\tvar visited = blankObject();\n\n\t\tfunction visit(key) {\n\t\t\tif (cycles[key]) {\n\t\t\t\tthrow new Error('Cyclical dependency detected');\n\t\t\t}\n\n\t\t\tif (visited[key]) return;\n\t\t\tvisited[key] = true;\n\n\t\t\tvar c = computed[key];\n\n\t\t\tif (c) {\n\t\t\t\tcycles[key] = true;\n\t\t\t\tc.deps.forEach(visit);\n\t\t\t\tsorted.push(c);\n\t\t\t}\n\t\t}\n\n\t\tfor (var key in this._computed) {\n\t\t\tcycles = blankObject();\n\t\t\tvisit(key);\n\t\t}\n\t},\n\n\tcompute: function(key, deps, fn) {\n\t\tvar store = this;\n\t\tvar value;\n\n\t\tvar c = {\n\t\t\tdeps: deps,\n\t\t\tupdate: function(state, changed, dirty) {\n\t\t\t\tvar values = deps.map(function(dep) {\n\t\t\t\t\tif (dep in changed) dirty = true;\n\t\t\t\t\treturn state[dep];\n\t\t\t\t});\n\n\t\t\t\tif (dirty) {\n\t\t\t\t\tvar newValue = fn.apply(null, values);\n\t\t\t\t\tif (differs(newValue, value)) {\n\t\t\t\t\t\tvalue = newValue;\n\t\t\t\t\t\tchanged[key] = true;\n\t\t\t\t\t\tstate[key] = value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tc.update(this._state, {}, true);\n\n\t\tthis._computed[key] = c;\n\t\tthis._sortComputedProperties();\n\t},\n\n\tget: get,\n\n\tobserve: observe,\n\n\tonchange: function(callback) {\n\t\tthis._changeHandlers.push(callback);\n\t\treturn {\n\t\t\tcancel: function() {\n\t\t\t\tvar index = this._changeHandlers.indexOf(callback);\n\t\t\t\tif (~index) this._changeHandlers.splice(index, 1);\n\t\t\t}\n\t\t};\n\t},\n\n\tset: function(newState) {\n\t\tvar oldState = this._state,\n\t\t\tchanged = this._changed = {},\n\t\t\tdirty = false;\n\n\t\tfor (var key in newState) {\n\t\t\tif (this._computed[key]) throw new Error(\"'\" + key + \"' is a read-only property\");\n\t\t\tif (differs(newState[key], oldState[key])) changed[key] = dirty = true;\n\t\t}\n\t\tif (!dirty) return;\n\n\t\tthis._state = assign({}, oldState, newState);\n\n\t\tfor (var i = 0; i < this._sortedComputedProperties.length; i += 1) {\n\t\t\tthis._sortedComputedProperties[i].update(this._state, changed);\n\t\t}\n\n\t\tfor (var i = 0; i < this._changeHandlers.length; i += 1) {\n\t\t\tthis._changeHandlers[i](this._state, changed);\n\t\t}\n\n\t\tdispatchObservers(this, this._observers.pre, changed, this._state, oldState);\n\n\t\tvar dependents = this._dependents.slice(); // guard against mutations\n\t\tfor (var i = 0; i < dependents.length; i += 1) {\n\t\t\tvar dependent = dependents[i];\n\t\t\tvar componentState = {};\n\t\t\tdirty = false;\n\n\t\t\tfor (var j = 0; j < dependent.props.length; j += 1) {\n\t\t\t\tvar prop = dependent.props[j];\n\t\t\t\tif (prop in changed) {\n\t\t\t\t\tcomponentState['$' + prop] = this._state[prop];\n\t\t\t\t\tdirty = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (dirty) dependent.component.set(componentState);\n\t\t}\n\n\t\tdispatchObservers(this, this._observers.post, changed, this._state, oldState);\n\t}\n});\n\nexport { Store };","function RssParser() {\n  const DC_NAMESPACE = 'http://purl.org/dc/elements/1.1/';\n  const RDF_NAMESPACE = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#';\n  const ISO_DATE_PATTERN = /([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9:]+).*$/;\n\n  const getDocument = function(xml) {\n    if (!xml) return;\n\n    let doc;\n\n    if (document.implementation.createDocument) {\n      const parser = new DOMParser();\n      doc = parser.parseFromString(xml, 'application/xml');\n    } else if (window.ActiveXObject) {\n      doc = new window.ActiveXObject('Microsoft.XMLDOM');\n      doc.async = 'false';\n      doc.loadXML(xml);\n    }\n\n    return doc;\n  };\n\n  const getChildElement = function(name, parent, namespace) {\n    if (!name || !parent) return null;\n    let method = 'getElementsByTagName';\n    if (namespace) method += 'NS';\n    return parent[method](name, namespace)[0];\n  };\n\n  const getText = function(node) {\n    if (!node) return '';\n    if (node.length) node = node[0];\n    return node.textContent;\n  };\n\n  const error = Error('Malformed RSS syntax');\n\n  const parseRss = function(root, type) {\n    const rss = { items: [] };\n    const channel = getChildElement('channel', root);\n\n    if (!channel) throw error;\n\n    rss.format = 'RSS';\n    rss.version = type === 'rdf:RDF' ? '1.0' : root.getAttribute('version');\n    rss.title = getText(getChildElement('title', channel));\n    rss.description = getText(getChildElement('description', channel));\n    rss.link = getText(getChildElement('link', channel));\n\n    const image = getChildElement('image', channel);\n\n    rss.image = image\n      ? {\n          source: getText(getChildElement('url', image)) || image.getAttributeNS(RDF_NAMESPACE, 'resource'),\n          title: getText(getChildElement('title', image)),\n          link: getText(getChildElement('link', image)),\n          width: getText(getChildElement('width', image)),\n          height: getText(getChildElement('height', image)),\n          description: getText(getChildElement('description', image))\n        }\n      : '';\n\n    if (type === 'rdf:RDF') {\n      const date = channel.getElementsByTagNameNS(DC_NAMESPACE, 'date');\n      rss.date = getDate(getText(date));\n      rss.rights = getText(channel.getElementsByTagNameNS(DC_NAMESPACE, 'creator'));\n\n      const textInput = getChildElement('textinput', root);\n\n      rss.input = textInput\n        ? {\n            link: getText(getChildElement('link', textInput)),\n            description: getText(getChildElement('description', textInput)),\n            name: getText(getChildElement('name', textInput)),\n            title: getText(getChildElement('title', textInput))\n          }\n        : '';\n    } else {\n      rss.date = getDate(\n        getText(getChildElement('lastBuildDate', channel)) || getText(getChildElement('pubDate', channel))\n      );\n      rss.rights = getText(getChildElement('copyright', channel));\n    }\n\n    // Create a native Array from HTMLCollection\n    const items = Array.apply(null, root.getElementsByTagName('item'));\n\n    items.forEach(node => {\n      const item = {\n        title: getText(getChildElement('title', node)),\n        description: getText(getChildElement('description', node)),\n        link: getText(getChildElement('link', node)) || getText(getChildElement('guid', node))\n      };\n\n      if (!item.description) {\n        let content = getText(getChildElement('encoded', node, 'content'));\n        if (content) {\n          item.description = content;\n        } else {\n          content = getText(getChildElement('encoded', node));\n          if (content) {\n            item.description = content;\n          }\n        }\n      }\n\n      addItemExtensions(node, item);\n      rss.items.push(item);\n    });\n\n    return rss;\n  };\n\n  const parseAtom = function(root) {\n    const rss = { items: [] };\n\n    rss.format = 'Atom';\n    rss.version = '1.0';\n    rss.title = getText(getChildElement('title', root));\n    rss.description = getText(getChildElement('subtitle', root));\n    rss.image = '';\n\n    const link = getChildElement('link:not([self])', root);\n    if (link) rss.link = link.getAttribute('href');\n\n    rss.date = getDate(getChildElement('updated', root));\n\n    const entries = Array.apply(null, root.getElementsByTagName('entry'));\n\n    entries.forEach(node => {\n      const item = {\n        title: getText(getChildElement('title', node)),\n        description: getText(getChildElement('summary', node))\n      };\n\n      const link = getChildElement('link', node);\n      if (link) item.link = link.getAttribute('href');\n\n      rss.items.push(item);\n    });\n\n    return rss;\n  };\n\n  const parseScriptingNews = function(root) {\n    const rss = { items: [] };\n    const channel = getChildElement('header', root);\n\n    if (!channel) throw error;\n\n    rss.format = 'Scripting News';\n    rss.version = getText(getChildElement('scriptingNewsVersion', channel));\n    rss.title = getText(getChildElement('channelTitle', channel));\n    rss.description = getText(getChildElement('channelDescription', channel));\n    rss.link = getText(getChildElement('channelLink', channel));\n\n    rss.date = getDate(\n      getText(getChildElement('lastBuildDate', channel)) || getText(getChildElement('pubDate', channel))\n    );\n\n    const imageUrl = getChildElement('imageUrl', channel);\n\n    if (imageUrl) {\n      rss.image = {\n        source: getText(imageUrl),\n        title: getText(getChildElement('imageTitle', channel)),\n        link: getText(getChildElement('imageLink', channel)),\n        width: getText(getChildElement('imageWidth', channel)),\n        height: getText(getChildElement('imageHeight', channel)),\n        description: getText(getChildElement('imageCaption', channel))\n      };\n    }\n\n    const items = Array.apply(null, root.getElementsByTagName('item'));\n\n    items.forEach(node => {\n      const item = { title: '' };\n\n      item.description = getText(getChildElement('text', node)).replace(/\\n/g, ' ');\n\n      const link = getChildElement('link', node);\n\n      if (link) {\n        const text = getText(getChildElement('linetext', link))\n          .replace(/\\n/g, ' ')\n          .trim();\n        if (text) {\n          item.description = item.description.replace(\n            new RegExp(text),\n            '<a href=\"' + getText(getChildElement('url', node)) + '\">' + text + '</a>'\n          );\n        }\n        item.link = getText(getChildElement('url', link));\n      }\n\n      addItemExtensions(node, item);\n      rss.items.push(item);\n    });\n\n    return rss;\n  };\n\n  const addItemExtensions = function(node, item) {\n    const source = getChildElement('source', node);\n    // Create a native Array from HTMLCollection\n    const enclosures = Array.apply(null, node.getElementsByTagName('enclosure'));\n    const category = getChildElement('category', node);\n\n    if (source) {\n      item.source = {\n        url: source.getAttribute('url'),\n        title: source.textContent\n      };\n    }\n\n    item.enclosures = enclosures.map(enclosure => {\n      return {\n        url: enclosure.getAttribute('url'),\n        length: enclosure.getAttribute('length'),\n        type: enclosure.getAttribute('type')\n      };\n    });\n\n    if (category) {\n      item.category = {\n        domain: category.getAttribute('domain') || '',\n        content: category.textContent\n      };\n    }\n\n    return item;\n  };\n\n  const getDate = function(str) {\n    let millis = Date.parse(str);\n\n    if (isNaN(millis)) {\n      millis = Date.parse(String(str).replace(ISO_DATE_PATTERN, '$1/$2/$3 $4'));\n      if (isNaN(millis)) millis = Date.now();\n    }\n\n    return new Date(millis);\n  };\n\n  return {\n    parse: function(xml) {\n      const doc = getDocument(xml);\n      const root = doc.documentElement;\n      const type = root.nodeName;\n\n      switch (type) {\n        case 'feed':\n          return parseAtom(root);\n\n        case 'scriptingNews':\n          return parseScriptingNews(root);\n\n        default:\n          return parseRss(root, type);\n      }\n    }\n  };\n}\n\nexport { RssParser };\n","const mode = 'prod';\nconst base = 'http://192.168.8.101';\n\nconst urls = (settings => {\n  return settings[mode] || {};\n})({\n  dev: {\n    app: base + ':5000',\n    proxy: base + ':8081/roxy',\n    referrers: base + ':8081/ferris?group=rssbox'\n  },\n\n  stage: {\n    app: 'https://p3k.org/rss-stage/',\n    proxy: 'https://6-dot-p3k-services.appspot.com/roxy',\n    referrers: 'https://6-dot-p3k-services.appspot.com/ferris?group=rssbox'\n  },\n\n  mixed: {\n    app: base + ':5000',\n    proxy: 'https://6-dot-p3k-services.appspot.com/roxy',\n    referrers: 'https://6-dot-p3k-services.appspot.com/ferris?group=rssbox'\n  }\n});\n\n//urls.default = urls.app + '/test/sampleRssAtom.xml';\n//urls.default = 'http://www.wienerzeitung.at/_export/rss/nachrichten/schlagzeilen/index.rss';\n\nexport { urls };\n","import { urls as localUrls } from './local';\n\n// These are backwards-compatible settings\nexport const defaults = {\n  align: 'initial',\n  boxFillColor: '#fff',\n  compact: false,\n  fontFace: 'inherit',\n  frameColor: '#000',\n  headless: false,\n  height: '',\n  linkColor: '',\n  maxItems: 7,\n  radius: 0,\n  showXmlButton: false,\n  textColor: '#000',\n  titleBarColor: '#add8e6',\n  titleBarTextColor: '#000',\n  width: 200\n};\n\nexport const keys = [\n  'align',\n  'boxFillColor',\n  'compact',\n  'fontFace',\n  'frameColor',\n  'headless',\n  'height',\n  'linkColor',\n  'maxItems',\n  'radius',\n  'showXmlButton',\n  'textColor',\n  'titleBarColor',\n  'titleBarTextColor',\n  'url',\n  'width'\n];\n\nconst baseUrl = '//p3k.org';\nconst serviceUrl = '//p3k-services.appspot.com';\n\nconst urls = {\n  app: baseUrl + '/rss',\n  proxy: location.protocol + serviceUrl + '/roxy',\n  referrers: location.protocol + serviceUrl + '/ferris?group=rssbox',\n  default: 'https://blog.p3k.org/stories.xml'\n};\n\nfor (let key in urls) {\n  if (key in localUrls) urls[key] = localUrls[key];\n}\n\nexport { urls };\n","import { urls } from './settings';\n\nconst defaultError = {\n  loading: false,\n  compact: false,\n  maxItems: 3,\n  format: 'Error',\n  version: '❌',\n  title: 'RSS Box Error',\n  description:\n    'This output was automatically generated to report an error that occurred during a request to the  RSS Box Viewer.',\n  items: [\n    {\n      title: 'Oops, something went wrong…',\n      description: 'An error occurred while processing the request to the RSS Box Viewer.'\n    },\n    {\n      title: 'The following error message was returned:',\n      description: 'Unknown error'\n    },\n    { title: '' }\n  ]\n};\n\nexport default function(url, message) {\n  const error = Object.assign({}, defaultError);\n  error.link = urls.app + '?url=' + url;\n  error.items[1].description = message;\n  error.items[2].description = `Most likely, this might have happened because of a non-existent or invalid RSS feed URL. <a href=\"https://validator.w3.org/feed/check.cgi?url=${url}\">Please check</a> and possibly correct your input, then try again.`;\n  return error;\n}\n","import { Store } from 'svelte/store';\nimport { RssParser } from './RssParser';\nimport { urls, defaults } from './settings';\nimport error from './error';\n\nexport default class RssStore extends Store {\n  constructor() {\n    const settings = {\n      date: new Date(),\n      description: '',\n      format: '',\n      image: '',\n      input: '',\n      items: [],\n      title: '',\n      version: ''\n    };\n\n    super(settings);\n\n    this.compute('formattedDate', ['date'], date => {\n      if (!date) return;\n      let month = (date.getMonth() + 1).toString().padStart(2, '0');\n      let day = date\n        .getDate()\n        .toString()\n        .padStart(2, '0');\n      let hours = date\n        .getHours()\n        .toString()\n        .padStart(2, '0');\n      let minutes = date\n        .getMinutes()\n        .toString()\n        .padStart(2, '0');\n      return `${date.getFullYear()}-${month}-${day}, ${hours}:${minutes}h`;\n    });\n\n    this.observe('url', this.fetch, { init: false });\n  }\n\n  fetch() {\n    const url = this.get('url');\n    if (!url) return;\n\n    this.set({ loading: true });\n\n    fetch(urls.proxy + '?url=' + encodeURIComponent(url))\n      .then(res => {\n        if (!res.ok) throw Error(res.statusText);\n\n        res\n          .text()\n          .then(json => {\n            const parser = RssParser();\n            const data = JSON.parse(json);\n            if (data.headers['X-Roxy-Error']) throw Error(data.headers['X-Roxy-Error']);\n            const rss = parser.parse(data.content);\n            if (!rss.date) rss.date = new Date(data.headers.date);\n            rss.loading = false;\n            this.set(rss);\n          })\n          .catch(message => {\n            this.set(error(url, message));\n            console.error(message);\n          });\n      })\n      .catch(message => {\n        this.set(error(url, message));\n        console.error(message);\n      });\n  }\n}\n","<a class=\"github-button\" href=\"https://github.com/p3k/rss-box\" data-size=\"large\" data-show-count=\"true\" aria-label=\"Star p3k/rss-box on GitHub\">Github</a>\n\n<script>\n  const script = document.createElement('script');\n  script.async = script.defer = true;\n  script.src = 'https://buttons.github.io/buttons.js';\n  document.head.appendChild(script);\n</script>\n","<div>\n  <small><i>“JavaScript RSS Viewer puts little or long customizable RSS boxes anywhere you put HTML; build your own slashbox hell or heaven, it’s feedarific!” — <a href='http://ourpla.net/cgi/pikie'>Abbe Normal</a></i></small>\n</div>\n\n<h2>{{ $appDescription }} {{ $appVersion }}</h2>\n\n<p class='msg warning'>\n  <strong>Reduced availability due to temporary violation of quota limit.</strong> You should <a href='//github.com/p3k/json3k'>install your own JSONP proxy</a>. You can always support the project with your <a href='http://flattr.com/thing/681881/JavaScript-RSS-Box-Viewer'>donation</a>.\n</p>\n\n<p>\n  This viewer can display <a href='http://en.wikipedia.org/wiki/RSS'>RSS</a> feeds of version <a href='http://cyber.law.harvard.edu/rss/examples/sampleRss091.xml' on:click='goto(event)'>0.91</a>, <a href='http://cyber.law.harvard.edu/rss/examples/sampleRss092.xml' on:click='goto(event)'>0.92</a>, <a href='http://rss.orf.at/fm4.xml' on:click='goto(event)'>1.0</a> and <a href='http://blog.p3k.org/stories.xml' on:click='goto(event)'>2.0</a> as well as even the good old legacy format <a href='http://essaysfromexodus.scripting.com/xml/scriptingNews2.xml' on:click='goto(event)'>Scripting News 2</a>. There is also basic support for <a href='https://www.theregister.co.uk/headlines.atom' on:click='goto(event)'>Atom 1.0</a>.\n</p>\n\n<p>\n  It provides a simple way to embed such RSS boxes in any <a href='http://validator.w3.org/'>valid HTML document</a> via an automagically generated JavaScript tag — <i>for free!</i>\n</p>\n\n<p>\n  Just enter the URL of any compatible RSS feed, modify the layout settings as you like and push the Reload button. When finished, copy the HTML code into your own web page – and voilà!\n</p>\n\n<p>\n  The code behind this is written in JavaScript and runs completely in your browser*. You can get the source code together with all the other necessary files from the <a href='//github.com/p3k/rss-box'>Github repository</a>.\n</p>\n\n<p>\n  <small>* A proxy server is needed for cross-origin requests.</small>\n</p>\n\n<p>\n  <Github/>\n</p>\n\n<Changes/>\n\n<h3>Future Development</h3>\n\n<p>\n  I have ceased actively developing this viewer but sometimes I get enthusiastic and fiddle around with the code. Of course it will be available here as is.\n</p>\n<p>\n  For questions and comments feel free to contact me (Tobi) via e-mail: <a href='mailto:&#109;&#97;&#105;&#108;&#43;&#114;&#115;&#115;&#64;&#112;&#51;&#107;&#46;&#111;&#114;&#103;'>&#109;&#97;&#105;&#108;&#43;&#114;&#115;&#115;&#64;&#112;&#51;&#107;&#46;&#111;&#114;&#103;</a>.\n</p>\n\n<h3>License</h3>\n\n<p>\n  <span xmlns:dct=\"http://purl.org/dc/terms/\" property=\"dct:title\">JavaScript RSS Box Viewer</span> by\n  <a xmlns:cc=\"http://creativecommons.org/ns#\" href=\"http://p3k.org/rss\" property=\"cc:attributionName\" rel=\"cc:attributionURL\">Tobi Schäfer</a> is licensed under a <a rel=\"license\" href=\"http://creativecommons.org/licenses/by-sa/3.0/at/deed.en_US\">Creative Commons Attribution-ShareAlike 3.0 Austria License</a>.\n</p>\n<p>\n  Based on a work at <a xmlns:dct=\"http://purl.org/dc/terms/\" href=\"https://p3k.org/source/svn/rss-box/trunk/\" rel=\"dct:source\">https://p3k.org/source/svn/rss-box/trunk/</a>.\n</p>\n<p>\n  <a rel=\"license\" href=\"http://creativecommons.org/licenses/by-sa/3.0/at/deed.en_US\">\n    <img alt=\"Creative Commons License\" style=\"border-width:0\" src=\"//i.creativecommons.org/l/by-sa/3.0/at/88x31.png\" />\n  </a>\n</p>\n\n<small>Thank you, <a href='//p3k.org/'>p3k.org</a>!</small>\n\n<style>\n  h3 {\n    display: inline-block;\n  }\n\n  h3 + p {\n    margin-top: 0;\n  }\n\n  small {\n    color: #bbb;\n  }\n\n  .warning {\n    border-color: #e44;\n    background: #fdd;\n  }\n</style>\n\n<script>\n  import Changes from './Changes.html';\n  import Github from './Github.html';\n\n  export default {\n    oncreate() {\n      this.store.observe('appDescription', description => {\n        document.title = description;\n      });\n    },\n\n    components: {\n      Changes,\n      Github\n    },\n\n    methods: {\n      goto(event) {\n        event.preventDefault();\n        this.store.set({ url: event.target.href });\n      }\n    }\n  }\n</script>\n","<ins class=\"adsbygoogle\" style=\"display:block\" data-ad-client=\"ca-pub-3965028043153138\" data-ad-slot=\"6370257451\" data-ad-format=\"auto\"></ins>\n\n<script>\n  (window.adsbygoogle = window.adsbygoogle || []).push({});\n\n  const script = document.createElement('script');\n  script.async = true;\n  script.src = '//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js';\n  document.head.appendChild(script);\n</script>\n\n<style>\n  ins {\n    overflow: hidden;\n    margin-bottom: 1em;\n  }\n</style>\n","<div data-link-color='{{ $linkColor }}' class='rssbox rssBox' style='max-width: {{ width }}; border-color: {{ $frameColor }}; border-radius: {{ $radius }}px; font: {{ $fontFace }}; float: {{ $align }};'>\n  {{ #if !$headless }}\n    <div class='rssbox-titlebar' style='color: {{ $titleBarTextColor }}; background-color: {{ $titleBarColor }}; border-bottom-color: {{ $frameColor }};'>\n      {{ #if $showXmlButton }}\n        <div class='rssbox-icon'>\n          <a href='{{ $url }}' title='{{ $format }} {{ $version }}' style='color: {{ $titleBarTextColor }}'>\n            <RssIcon/>\n          </a>\n        </div>\n      {{ /if }}\n      <div>\n        <a href='{{ $link }}' style='color: {{ $titleBarTextColor }};'>\n          {{ $title }}\n        </a>\n      </div>\n      <div class='rssbox-date'>\n        {{ $formattedDate }}\n      </div>\n    </div>\n  {{ /if }}\n\n  <div class='rssbox-content rssBoxContent' style='background-color: {{ $boxFillColor }}; height: {{ height }};'>\n    {{ #if $image && !$compact }}\n      {{ #await load($image) }}\n      {{ then image }}\n        <a href='{{ $image.link }}' title='{{ $image.title }}'>\n          <div alt='{{ $image.description }}' class='rssbox-image' style='background-image: url({{ $image.source }}); width: {{ image.width }}; height: {{ image.height }};'></div>\n        </a>\n      {{ /await }}\n    {{ /if }}\n\n    {{ #each $items as item, index }}\n      {{ #if index < $maxItems }}\n        <div class='rssbox-item-content rssBoxItemContent' style='color: {{ $textColor }}'>\n          {{ #if item.title }}\n            <div class='rssbox-item-title {{ itemTitleClass }}'>\n              {{ #if item.link }}\n                <a href='{{ item.link }}'>\n                  {{{ item.title }}}\n                </a>\n              {{ else }}\n                {{{ item.title }}}\n              {{ /if }}\n            </div>\n          {{ /if }}\n\n          {{ #if !$compact }}\n            <aside>\n              {{ #if item.source }}\n                <a href='{{ item.source.url }}' title='{{ item.source.title }}' class='rssbox-source'>\n                  {{ #if item.source.url.endsWith('.xml') }}\n                    <RssIcon/>\n                  {{ else }}\n                    <LinkIcon/>\n                  {{ /if }}\n                </a>\n              {{ /if }}\n\n              {{ #if item.enclosures }}\n                {{ #each item.enclosures as enclosure }}\n                  <a href='{{ enclosure.url }}' title='{{ kb(enclosure.length) }} {{ enclosure.type }}' class='rssbox-enclosure'>\n                    <PaperclipIcon/>\n                  </a>\n                {{ /each }}\n              {{ /if }}\n            </aside>\n            {{{ item.description }}}\n          {{ /if }}\n        </div>\n      {{ /if }}\n    {{ /each }}\n\n    {{ #if $input }}\n      <form class='rssbox-form' method='get' action='{{ $input.link }}'>\n        <input type='text' name='{{ $input.name }}' placeholder='Enter search &amp; hit return…' data-placeholder='{{ $input.description }}'>\n        <!-- input type='submit' value='{{ $input.title }}' -->\n      </form>\n    {{ /if }}\n    <div class='rssbox-promo rssBoxPromo'>\n      <a href='{{ appUrl() }}' style='color: {{ $textColor }}'>RSS Box by p3k.org</a>\n    </div>\n  </div>\n</div>\n\n<style>\n  .rssbox {\n    box-sizing: border-box;\n    width: 100%;\n    border: 1px solid #000;\n    font-family: sans-serif;\n    overflow: hidden;\n    border-radius: 0;\n    -moz-border-radius: 0;\n  }\n\n  .rssbox-icon {\n    float: right;\n    width: 1em;\n    margin-left: 0.5em;\n  }\n\n  .rssbox-titlebar {\n    padding: 0.5em;\n    color: #000;\n    background-color: #add8e6;\n    border-bottom: 1px solid #000;\n    font-weight: bold;\n    letter-spacing: 0.01em;\n  }\n\n  .rssbox-date {\n    margin-top: 0.2em;\n    font-size: 0.8em;\n    font-weight: normal;\n  }\n\n  .rssbox-content {\n    height: auto;\n    padding: 0.5em;\n    overflow-x: hidden;\n    overflow-y: auto;\n    background-color: #fff;\n    clear: both;\n    -ms-overflow-style: -ms-autohiding-scrollbar;\n  }\n\n  .rssbox-content aside {\n    clear: both;\n    float: right;\n  }\n\n  .rssbox-content aside a {\n    display: block;\n    margin-left: 0.5em;\n  }\n\n  .rssbox-image {\n    float: right;\n    margin: 0 0 0.5em 0.5em;\n    background-position: left center;\n    background-repeat: no-repeat;\n    background-size: contain;\n  }\n\n  .rssbox-item-title.bold {\n    font-weight: bold;\n  }\n\n  .rssbox-enclosure, .rssbox-source {\n    display: block;\n    width: 1em;\n  }\n\n  .rssbox-form {\n    margin-bottom: 0.8em;\n  }\n\n  .rssbox-form input {\n    padding: 0.5em;\n    background-color: #fff;\n  }\n\n  .rssbox-promo {\n    text-align: right;\n    font-size: 0.7em;\n    letter-spacing: 0.01em;\n  }\n</style>\n\n<script>\n  import { urls } from '../src/settings';\n  import LinkIcon from './LinkIcon.html';\n  import RssIcon from './RssIcon.html';\n  import PaperclipIcon from './PaperclipIcon.html';\n\n  export default {\n    components: {\n      LinkIcon,\n      PaperclipIcon,\n      RssIcon\n    },\n\n    oncreate() {\n      const staticId = 'rssbox-static-stylesheet';\n      const dynamicId = 'rssbox-dynamic-stylesheet';\n\n      let staticCss = window[staticId];\n      let dynamicCss = window[dynamicId];\n\n      if (!staticCss) {\n        staticCss = document.createElement('link');\n        staticCss.id = staticId;\n        staticCss.rel = 'stylesheet';\n        staticCss.href = urls.app + '/box.css';\n        document.head.appendChild(staticCss);\n      }\n\n      if (!dynamicCss) {\n        dynamicCss = document.createElement('style');\n        dynamicCss.id = dynamicId;\n        document.head.appendChild(dynamicCss);\n      }\n\n      this.store.observe('linkColor', color => {\n        if (!color) return;\n\n        let rule =\n          `.rssbox[data-link-color=\"${color}\"] a {\n            color: ${color};\n          }`;\n\n        if (dynamicCss.innerHTML.indexOf(rule) < 0) dynamicCss.innerHTML += rule;\n      });\n    },\n\n    helpers: {\n      kb(bytes) {\n        return (bytes / 1000).toFixed(2) + '\\u200akB';\n      },\n\n      // Without the dummy argument Svelte complains about this not being a pure function\n      appUrl(dummy = null) {\n        return urls.app;\n      },\n\n      load(data) {\n        return new Promise(fulfill => {\n          const image = new Image();\n\n          image.onload = () => {\n            const maxWidth = Math.min(100, image.width);\n            const factor = image.width > maxWidth ? maxWidth / image.width : 1;\n\n            fulfill({\n              width: (image.width * factor) + 'px',\n              height: (image.height * factor) + 'px'\n            });\n          };\n\n          image.src = data.source;\n        });\n      }\n    },\n\n    computed: {\n      height: $height => $height && $height > -1 ? $height + 'px' : '100%',\n      width: $width => $width ? $width + 'px' : '100%',\n      itemTitleClass: $compact => !$compact ? 'bold' : ''\n    }\n  };\n</script>\n","<details on:toggle='update(event)'>\n  <summary></summary>\n  {{ #if referrers.length }}\n    {{ #each referrers as referrer }}\n      <div class='referrer'>\n        <code>{{ format(referrer.percentage) }}</code>\n        <a href='{{ referrer.url }}'>{{ referrer.host }}</a>\n      </div>\n    {{ /each }}\n  {{ else }}\n    Loading…\n  {{ /if }}\n</details>\n\n<style>\n  details {\n    line-height: 1.2em;\n  }\n\n  code {\n    margin-right: 0.5em;\n    color: #bbb;\n    font-size: 0.7em;\n    white-space: pre;\n  }\n\n  summary {\n    outline: none;\n  }\n\n  .referrer {\n    white-space: nowrap;\n  }\n</style>\n\n<script>\n  import { urls } from '../src/settings';\n\n  let loaded = false;\n\n  export default {\n    oncreate() {\n      if ('open' in document.createElement('details') === false) {\n        this.load();\n      }\n    },\n\n    data() {\n      return {\n        referrers: []\n      }\n    },\n\n    helpers: {\n      format: float => {\n        if (float < 0.01) return '< 0.01';\n        return float.toFixed(2).padStart(6)\n      }\n    },\n\n    methods: {\n      update(event) {\n        if (event.target.open && !loaded) this.load();\n      },\n\n      load() {\n        fetch(urls.referrers).then(res => {\n          res.json().then(data => this.display(data));\n        });\n      },\n\n      display(data) {\n        const hosts = data.reduce((accu, item) => {\n          if (item.url.startsWith('http') && !item.url.startsWith(urls.app)) {\n            const url = item.url.replace(/^([^.]*)www\\./, '$1');\n            const host = url.split('/')[2];\n            let data = accu[host];\n\n            if (!data) {\n              data = { host, url, hits: item.hits, total: 0 };\n              accu[host] = data;\n              accu.push(data);\n            } else if (item.hits > data.hits) {\n              data.url = item.url;\n              data.hits = item.hits;\n            }\n\n            data.total += item.hits;\n          }\n          return accu;\n        }, []);\n\n        const total = hosts.reduce((accu, item) => accu += item.total, 0);\n\n        const referrers = hosts.map(item => {\n          item.percentage = item.total / total * 100;\n          return item;\n        });\n\n        referrers.sort((a, b) => b.percentage - a.percentage);\n\n        this.set({ referrers });\n        loaded = true;\n      }\n    }\n  }\n</script>\n","<form on:submit='update(event)'>\n  <table class='table'>\n    <colgroup>\n      <col width='*'>\n      <col width='90%'>\n    </colgroup>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Feed URL</label>\n      </td>\n      <td>\n        <input type='url' name='url' value='{{ $url }}' required on:change='update(event)'>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label>Title</label>\n      </td>\n      <td>{{ $title }}</td>\n    </tr>\n    <tr>\n      <td class='top'>\n        <label on:click='label(event)'>Description</label>\n      </td>\n      <td>\n        <details>\n          <summary></summary>\n          {{ $description }}\n        </details>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label>Last build</label>\n      </td>\n      <td>{{ $formattedDate }}</td>\n    </tr>\n    <tr>\n      <td>\n        <label>Source</label>\n      </td>\n      <td class='source'>\n        {{ #if $loading }}\n          Loading...\n        {{ else }}\n          <a href='{{ $url }}'>{{ $format }} {{ $version }}</a>\n        {{ /if }}\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Max. items</label>\n      </td>\n      <td>\n        <input type='number' name='maxItems' value='{{ $maxItems }}' min=1 max=99 required on:change='update(event)'>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Max. width</label>\n      </td>\n      <td>\n        <input type='number' name='width' value='{{ $width }}' min=100 max=9999 on:change='update(event)' placeholder='spare'>\n        <small>px</small>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Content height</label>\n      </td>\n      <td>\n        <input type='number' name='height' value='{{ $height }}' min=100 max=9999 on:change='update(event)' placeholder='spare'>\n        <small>px</small>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Corner radius</label>\n      </td>\n      <td>\n        <input type='number' name='radius' value='{{ $radius }}' min=0 max=20 required on:change='update(event)'>\n        <small>px</small>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>XML button</label>\n      </td>\n      <td>\n        <input type='checkbox' name='showXmlButton' value='1' checked='{{ $showXmlButton }}' on:change='update(event)'>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Compact view</label>\n      </td>\n      <td>\n        <input type='checkbox' name='compact' value='1' checked='{{ $compact }}' on:change='update(event)'>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Headless</label>\n      </td>\n      <td>\n        <input type='checkbox' name='headless' value='1' checked='{{ $headless }}' on:change='update(event)'>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Frame color</label>\n      </td>\n      <td>\n        <input type='color' name='frameColor' value='{{ $frameColor }}' size=6 maxlength=7 on:change='update(event)'>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Titlebar color</label>\n      </td>\n      <td>\n        <input type='color' name='titleBarColor' value='{{ $titleBarColor }}' size=6 maxlength=7 on:change='update(event)'>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Title color</label>\n      </td>\n      <td>\n        <input type='color' name='titleBarTextColor' value='{{ $titleBarTextColor }}' size=6 maxlength=7 on:change='update(event)'>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Box color</label>\n      </td>\n      <td>\n        <input type='color' name='boxFillColor' value='{{ $boxFillColor }}' size=6 maxlength=7 on:change='update(event)'>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Text color</label>\n      </td>\n      <td>\n        <input type='color' name='textColor' value='{{ $textColor }}' size=6 maxlength=7 on:change='update(event)'>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Link color</label>\n      </td>\n      <td>\n        <input type='color' name='linkColor' value='{{ $linkColor }}' size=6 maxlength=7 on:change='update(event)'>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Font face</label>\n      </td>\n      <td>\n        <input name='fontFace' value='{{ $fontFace }}' on:change='update(event)' pattern='[\\d.]+(?:pt|px|em|%)+\\s+[\\s\\w\\-,]+' placeholder='e.g. 10pt Helvetica, sans-serif'>\n      </td>\n    </tr>\n    <tr>\n      <td></td>\n      <td>\n        {{ #if $loading }}\n          <button class='btn btn-sm btn-c' disabled>Loading...</button>\n        {{ else }}\n          <button class='btn btn-sm btn-b' type='button' on:click='reload(event)'>Reload</button>\n        {{ /if }}\n      </td>\n    </tr>\n    <tr style='vertical-align: top'>\n      <td>\n        <label on:click='label(event)'>\n          HTML code<br>\n          (copy&amp;pasta)\n        </label>\n      </td>\n      <td>\n        <textarea name='code' cols='10' rows='3' readonly on:click='copy(event)'>{{ $code }}</textarea>\n      </td>\n    </tr>\n    <tr>\n      <td class='top'>\n        <label on:click='label(event)'>\n          Referrers<br>\n          (last 24 hours)\n        </label>\n      </td>\n      <td class='top'>\n        <Referrers/>\n      </td>\n    </tr>\n  </table>\n</form>\n\n<style>\n  table {\n    overflow: auto;\n  }\n\n  tr td:first-child {\n    color: #bbb;\n    text-align: right;\n    white-space: nowrap;\n  }\n\n  summary {\n    outline: none;\n  }\n\n  textarea, input:not([type='checkbox']) {\n    box-sizing: border-box;\n    height: 34px;\n    padding: 5px\n  }\n\n  .top {\n    vertical-align: top;\n  }\n\n  .source {\n    line-height: 1em;\n  }\n\n  [name=url], [name=fontFace], [name=code] {\n    width: 90%;\n  }\n\n  [type=color], [type=number] {\n    width: 7em;\n  }\n\n  [name=code] {\n    color: #bbb;\n    height: 10em;\n    overflow: hidden;\n    resize: vertical;\n  }\n</style>\n\n<script>\n  import Referrers from './Referrers.html';\n\n  export default {\n    components: {\n      Referrers\n    },\n\n    methods: {\n      update(event) {\n        event.preventDefault();\n        if (!event.target.checkValidity()) return event.target.reportValidity();\n        const name = event.target.name;\n        const type = event.target.type;\n        const value = event.target[type === 'checkbox' ? 'checked' : 'value'];\n        this.store.set({ [name]: value });\n      },\n\n      reload(event) {\n        event.preventDefault();\n        const url = this.store.get('url');\n        this.store.set({ url: null });\n        this.store.set({ url });\n      },\n\n      copy(event) {\n        try {\n          event.target.select();\n          document.execCommand('copy');\n        } catch (error) { }\n      },\n\n      label(event) {\n        const sibling = event.target.parentNode.nextElementSibling;\n        let input = sibling.querySelector('input');\n        if (!input) input = sibling.querySelector('summary');\n        if (!input) input = sibling.querySelector('textarea');\n        if (!input) return;\n        if (input.click) input.click();\n        if (input.select) input.select();\n      }\n    }\n  }\n</script>\n","export default callback => {\n  const features = ['fetch', 'Object.assign', 'Promise', 'String.prototype.padStart'];\n\n  const script = document.createElement('script');\n  script.src = 'https://cdn.polyfill.io/v2/polyfill.min.js?features=' + features.join();\n  script.defer = script.async = true;\n  script.onload = callback;\n  document.head.appendChild(script);\n};\n","import RssStore from './RssStore';\nimport { description, version } from '../package.json';\n\nimport App from '../components/App.html';\nimport { keys, urls } from './settings';\nimport polyfill from './polyfill.io';\n\npolyfill(() => {\n  const getQuery = () => {\n    const query = [];\n\n    keys.forEach(key => {\n      const value = store.get(key);\n      if (!value) return;\n      query.push(key + '=' + encodeURIComponent(value));\n    });\n\n    return query.join('&');\n  };\n\n  const store = new RssStore();\n\n  store.compute('code', keys, () => {\n    const query = getQuery().replace(/&/g, '&amp;');\n    return `<script async defer src='${urls.app}/main.js?${query}'></script>`;\n  });\n\n  const app = new App({\n    target: document.querySelector('main'),\n    store\n  });\n\n  const query = location.search;\n  let url;\n\n  if (query && query.startsWith('?url=')) {\n    const parts = query.substr(5).split('&');\n    url = parts[0];\n  }\n\n  store.set({\n    align: 'initial',\n    appDescription: description,\n    appVersion: version,\n    boxFillColor: '#ffead2',\n    compact: false,\n    fontFace: '10pt sans-serif',\n    frameColor: '#b3a28e',\n    headless: false,\n    height: '',\n    linkColor: '#2c7395',\n    maxItems: 7,\n    radius: 5,\n    showXmlButton: true,\n    textColor: '#95412b',\n    titleBarColor: '#90a8b3',\n    titleBarTextColor: '#ffead2',\n    url: url || urls.default,\n    width: ''\n  });\n\n  // For debugging\n  //window.store = store;\n});\n"],"names":["noop","assign","target","k","source","i","len","arguments","length","appendNode","node","appendChild","insertNode","anchor","insertBefore","detachNode","parentNode","removeChild","detachBetween","before","after","nextSibling","destroyEach","iterations","d","createElement","name","document","createSvgElement","createElementNS","createText","data","createTextNode","createComment","addListener","event","handler","addEventListener","removeListener","removeEventListener","setAttribute","attribute","value","setStyle","key","style","setProperty","blankObject","Object","create","destroy","detach","this","fire","set","get","_fragment","u","_state","differs","a","b","dispatchObservers","component","group","changed","newState","oldState","newValue","oldValue","callbacks","callback","__calling","call","init","options","_observers","pre","post","_handlers","_bind","root","store","observe","defer","push","cancel","index","indexOf","splice","callAll","fns","pop","removeFromStore","_remove","proto","eventName","handlers","slice","on","_set","_lock","_beforecreate","_oncreate","_aftercreate","teardown","_recompute","dirty","p","_mount","m","_unmount","Store","state","_changeHandlers","_dependents","_computed","_sortedComputedProperties","prototype","_add","props","_init","prop","_sortComputedProperties","cycles","computed","sorted","visited","visit","Error","c","deps","forEach","compute","fn","update","values","map","dep","apply","onchange","_changed","dependents","dependent","componentState","j","RssParser","const","DC_NAMESPACE","ISO_DATE_PATTERN","getChildElement","parent","namespace","let","method","getText","textContent","error","addItemExtensions","item","enclosures","Array","getElementsByTagName","category","url","getAttribute","title","enclosure","type","domain","content","getDate","str","millis","Date","parse","isNaN","String","replace","now","xml","doc","implementation","createDocument","DOMParser","parseFromString","window","ActiveXObject","async","loadXML","getDocument","documentElement","nodeName","rss","items","format","version","description","image","link","date","parseAtom","channel","imageUrl","width","height","text","trim","RegExp","parseScriptingNews","getAttributeNS","getElementsByTagNameNS","rights","textInput","input","parseRss","base","urls","dev","app","proxy","referrers","stage","mixed","keys","serviceUrl","baseUrl","location","protocol","default","localUrls","defaultError","loading","compact","maxItems","message","RssStore","settings","super","month","getMonth","toString","padStart","day","hours","getHours","minutes","getMinutes","getFullYear","fetch","encodeURIComponent","then","res","ok","statusText","json","parser","JSON","headers","catch","console","script","src","head","goto","$appDescription","$appVersion","preventDefault","href","adsbygoogle","bytes","toFixed","Promise","fulfill","Image","onload","maxWidth","Math","min","factor","$headless","$image","$compact","$items","dummy","appUrl","$textColor","$boxFillColor","$linkColor","$frameColor","$radius","$fontFace","$align","$input","$url","$format","$version","$titleBarTextColor","$title","$formattedDate","$link","$titleBarColor","$showXmlButton","load","$maxItems","itemTitleClass","kb","endsWith","staticId","dynamicId","staticCss","dynamicCss","id","rel","color","rule","innerHTML","$height","$width","loaded","float","open","display","hosts","reduce","accu","startsWith","host","split","hits","total","percentage","sort","referrer","checkValidity","reportValidity","reload","copy","select","execCommand","label","sibling","nextElementSibling","querySelector","click","$loading","$description","$code","join","polyfill","query","getQuery","App","search","substr","align","appDescription","appVersion","boxFillColor","fontFace","frameColor","headless","linkColor","radius","showXmlButton","textColor","titleBarColor","titleBarTextColor"],"mappings":"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"}
{"version":3,"file":"app.js","sources":["../src/shims.js","../node_modules/svelte/shared.js","../node_modules/svelte/store.js","../src/RssParser.js","../src/local.js","../src/settings.js","../src/error.js","../src/RssStore.js","../components/Flattr.html","../components/About.html","../components/Ad.html","../components/Box.html","../components/Referrers.html","../components/Configurator.html","../src/app.js"],"sourcesContent":["if (!String.prototype.padStart) {\n  String.prototype.padStart = function(len = 0, char = ' ') {\n    let str = this;\n    while (str.length < len) {\n      str = char + str;\n    }\n    return str;\n  };\n}\n","function noop() {}\n\nfunction assign(target) {\n\tvar k,\n\t\tsource,\n\t\ti = 1,\n\t\tlen = arguments.length;\n\tfor (; i < len; i++) {\n\t\tsource = arguments[i];\n\t\tfor (k in source) target[k] = source[k];\n\t}\n\n\treturn target;\n}\n\nfunction appendNode(node, target) {\n\ttarget.appendChild(node);\n}\n\nfunction insertNode(node, target, anchor) {\n\ttarget.insertBefore(node, anchor);\n}\n\nfunction detachNode(node) {\n\tnode.parentNode.removeChild(node);\n}\n\nfunction detachBetween(before, after) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction detachBefore(after) {\n\twhile (after.previousSibling) {\n\t\tafter.parentNode.removeChild(after.previousSibling);\n\t}\n}\n\nfunction detachAfter(before) {\n\twhile (before.nextSibling) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction reinsertBetween(before, after, target) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\ttarget.appendChild(before.parentNode.removeChild(before.nextSibling));\n\t}\n}\n\nfunction reinsertChildren(parent, target) {\n\twhile (parent.firstChild) target.appendChild(parent.firstChild);\n}\n\nfunction reinsertAfter(before, target) {\n\twhile (before.nextSibling) target.appendChild(before.nextSibling);\n}\n\nfunction reinsertBefore(after, target) {\n\tvar parent = after.parentNode;\n\twhile (parent.firstChild !== after) target.appendChild(parent.firstChild);\n}\n\nfunction destroyEach(iterations) {\n\tfor (var i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d();\n\t}\n}\n\nfunction createFragment() {\n\treturn document.createDocumentFragment();\n}\n\nfunction createElement(name) {\n\treturn document.createElement(name);\n}\n\nfunction createSvgElement(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\nfunction createText(data) {\n\treturn document.createTextNode(data);\n}\n\nfunction createComment() {\n\treturn document.createComment('');\n}\n\nfunction addListener(node, event, handler) {\n\tnode.addEventListener(event, handler, false);\n}\n\nfunction removeListener(node, event, handler) {\n\tnode.removeEventListener(event, handler, false);\n}\n\nfunction setAttribute(node, attribute, value) {\n\tnode.setAttribute(attribute, value);\n}\n\nfunction setXlinkAttribute(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\nfunction getBindingGroupValue(group) {\n\tvar value = [];\n\tfor (var i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.push(group[i].__value);\n\t}\n\treturn value;\n}\n\nfunction toNumber(value) {\n\treturn value === '' ? undefined : +value;\n}\n\nfunction timeRangesToArray(ranges) {\n\tvar array = [];\n\tfor (var i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\nfunction children (element) {\n\treturn Array.from(element.childNodes);\n}\n\nfunction claimElement (nodes, name, attributes, svg) {\n\tfor (var i = 0; i < nodes.length; i += 1) {\n\t\tvar node = nodes[i];\n\t\tif (node.nodeName === name) {\n\t\t\tfor (var j = 0; j < node.attributes.length; j += 1) {\n\t\t\t\tvar attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) node.removeAttribute(attribute.name);\n\t\t\t}\n\t\t\treturn nodes.splice(i, 1)[0]; // TODO strip unwanted attributes\n\t\t}\n\t}\n\n\treturn svg ? createSvgElement(name) : createElement(name);\n}\n\nfunction claimText (nodes, data) {\n\tfor (var i = 0; i < nodes.length; i += 1) {\n\t\tvar node = nodes[i];\n\t\tif (node.nodeType === 3) {\n\t\t\tnode.data = data;\n\t\t\treturn nodes.splice(i, 1)[0];\n\t\t}\n\t}\n\n\treturn createText(data);\n}\n\nfunction setInputType(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {}\n}\n\nfunction setStyle(node, key, value) {\n\tnode.style.setProperty(key, value);\n}\n\nfunction selectOption(select, value) {\n\tfor (var i = 0; i < select.options.length; i += 1) {\n\t\tvar option = select.options[i];\n\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n}\n\nfunction selectOptions(select, value) {\n\tfor (var i = 0; i < select.options.length; i += 1) {\n\t\tvar option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nfunction selectValue(select) {\n\tvar selectedOption = select.querySelector(':checked') || select.options[0];\n\treturn selectedOption && selectedOption.__value;\n}\n\nfunction selectMultipleValue(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), function(option) {\n\t\treturn option.__value;\n\t});\n}\n\nfunction linear(t) {\n\treturn t;\n}\n\nfunction generateRule(\n\ta,\n\tb,\n\tdelta,\n\tduration,\n\tease,\n\tfn\n) {\n\tvar keyframes = '{\\n';\n\n\tfor (var p = 0; p <= 1; p += 16.666 / duration) {\n\t\tvar t = a + delta * ease(p);\n\t\tkeyframes += p * 100 + '%{' + fn(t) + '}\\n';\n\t}\n\n\treturn keyframes + '100% {' + fn(b) + '}\\n}';\n}\n\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n\tvar hash = 5381;\n\tvar i = str.length;\n\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn hash >>> 0;\n}\n\nfunction wrapTransition(component, node, fn, params, intro, outgroup) {\n\tvar obj = fn(node, params);\n\tvar duration = obj.duration || 300;\n\tvar ease = obj.easing || linear;\n\tvar cssText;\n\n\t// TODO share <style> tag between all transitions?\n\tif (obj.css && !transitionManager.stylesheet) {\n\t\tvar style = createElement('style');\n\t\tdocument.head.appendChild(style);\n\t\ttransitionManager.stylesheet = style.sheet;\n\t}\n\n\tif (intro) {\n\t\tif (obj.css && obj.delay) {\n\t\t\tcssText = node.style.cssText;\n\t\t\tnode.style.cssText += obj.css(0);\n\t\t}\n\n\t\tif (obj.tick) obj.tick(0);\n\t}\n\n\treturn {\n\t\tt: intro ? 0 : 1,\n\t\trunning: false,\n\t\tprogram: null,\n\t\tpending: null,\n\t\trun: function(intro, callback) {\n\t\t\tvar program = {\n\t\t\t\tstart: window.performance.now() + (obj.delay || 0),\n\t\t\t\tintro: intro,\n\t\t\t\tcallback: callback\n\t\t\t};\n\n\t\t\tif (obj.delay) {\n\t\t\t\tthis.pending = program;\n\t\t\t} else {\n\t\t\t\tthis.start(program);\n\t\t\t}\n\n\t\t\tif (!this.running) {\n\t\t\t\tthis.running = true;\n\t\t\t\ttransitionManager.add(this);\n\t\t\t}\n\t\t},\n\t\tstart: function(program) {\n\t\t\tcomponent.fire(program.intro ? 'intro.start' : 'outro.start', { node: node });\n\n\t\t\tprogram.a = this.t;\n\t\t\tprogram.b = program.intro ? 1 : 0;\n\t\t\tprogram.delta = program.b - program.a;\n\t\t\tprogram.duration = duration * Math.abs(program.b - program.a);\n\t\t\tprogram.end = program.start + program.duration;\n\n\t\t\tif (obj.css) {\n\t\t\t\tif (obj.delay) node.style.cssText = cssText;\n\n\t\t\t\tprogram.rule = generateRule(\n\t\t\t\t\tprogram.a,\n\t\t\t\t\tprogram.b,\n\t\t\t\t\tprogram.delta,\n\t\t\t\t\tprogram.duration,\n\t\t\t\t\tease,\n\t\t\t\t\tobj.css\n\t\t\t\t);\n\n\t\t\t\ttransitionManager.addRule(program.rule, program.name = '__svelte_' + hash(program.rule));\n\n\t\t\t\tnode.style.animation = (node.style.animation || '')\n\t\t\t\t\t.split(', ')\n\t\t\t\t\t.filter(function(anim) {\n\t\t\t\t\t\t// when introing, discard old animations if there are any\n\t\t\t\t\t\treturn anim && (program.delta < 0 || !/__svelte/.test(anim));\n\t\t\t\t\t})\n\t\t\t\t\t.concat(program.name + ' ' + duration + 'ms linear 1 forwards')\n\t\t\t\t\t.join(', ');\n\t\t\t}\n\n\t\t\tthis.program = program;\n\t\t\tthis.pending = null;\n\t\t},\n\t\tupdate: function(now) {\n\t\t\tvar program = this.program;\n\t\t\tif (!program) return;\n\n\t\t\tvar p = now - program.start;\n\t\t\tthis.t = program.a + program.delta * ease(p / program.duration);\n\t\t\tif (obj.tick) obj.tick(this.t);\n\t\t},\n\t\tdone: function() {\n\t\t\tvar program = this.program;\n\t\t\tthis.t = program.b;\n\t\t\tif (obj.tick) obj.tick(this.t);\n\t\t\tif (obj.css) transitionManager.deleteRule(node, program.name);\n\t\t\tprogram.callback();\n\t\t\tprogram = null;\n\t\t\tthis.running = !!this.pending;\n\t\t},\n\t\tabort: function() {\n\t\t\tif (obj.tick) obj.tick(1);\n\t\t\tif (obj.css) transitionManager.deleteRule(node, this.program.name);\n\t\t\tthis.program = this.pending = null;\n\t\t\tthis.running = false;\n\t\t}\n\t};\n}\n\nvar transitionManager = {\n\trunning: false,\n\ttransitions: [],\n\tbound: null,\n\tstylesheet: null,\n\tactiveRules: {},\n\n\tadd: function(transition) {\n\t\tthis.transitions.push(transition);\n\n\t\tif (!this.running) {\n\t\t\tthis.running = true;\n\t\t\trequestAnimationFrame(this.bound || (this.bound = this.next.bind(this)));\n\t\t}\n\t},\n\n\taddRule: function(rule, name) {\n\t\tif (!this.activeRules[name]) {\n\t\t\tthis.activeRules[name] = true;\n\t\t\tthis.stylesheet.insertRule('@keyframes ' + name + ' ' + rule, this.stylesheet.cssRules.length);\n\t\t}\n\t},\n\n\tnext: function() {\n\t\tthis.running = false;\n\n\t\tvar now = window.performance.now();\n\t\tvar i = this.transitions.length;\n\n\t\twhile (i--) {\n\t\t\tvar transition = this.transitions[i];\n\n\t\t\tif (transition.program && now >= transition.program.end) {\n\t\t\t\ttransition.done();\n\t\t\t}\n\n\t\t\tif (transition.pending && now >= transition.pending.start) {\n\t\t\t\ttransition.start(transition.pending);\n\t\t\t}\n\n\t\t\tif (transition.running) {\n\t\t\t\ttransition.update(now);\n\t\t\t\tthis.running = true;\n\t\t\t} else if (!transition.pending) {\n\t\t\t\tthis.transitions.splice(i, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (this.running) {\n\t\t\trequestAnimationFrame(this.bound);\n\t\t} else if (this.stylesheet) {\n\t\t\tvar i = this.stylesheet.cssRules.length;\n\t\t\twhile (i--) this.stylesheet.deleteRule(i);\n\t\t\tthis.activeRules = {};\n\t\t}\n\t},\n\n\tdeleteRule: function(node, name) {\n\t\tnode.style.animation = node.style.animation\n\t\t\t.split(', ')\n\t\t\t.filter(function(anim) {\n\t\t\t\treturn anim.slice(0, name.length) !== name;\n\t\t\t})\n\t\t\t.join(', ');\n\t}\n};\n\nfunction blankObject() {\n\treturn Object.create(null);\n}\n\nfunction destroy(detach) {\n\tthis.destroy = noop;\n\tthis.fire('destroy');\n\tthis.set = this.get = noop;\n\n\tif (detach !== false) this._fragment.u();\n\tthis._fragment.d();\n\tthis._fragment = this._state = null;\n}\n\nfunction destroyDev(detach) {\n\tdestroy.call(this, detach);\n\tthis.destroy = function() {\n\t\tconsole.warn('Component was already destroyed');\n\t};\n}\n\nfunction differs(a, b) {\n\treturn a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\n\nfunction dispatchObservers(component, group, changed, newState, oldState) {\n\tfor (var key in group) {\n\t\tif (!changed[key]) continue;\n\n\t\tvar newValue = newState[key];\n\t\tvar oldValue = oldState[key];\n\n\t\tvar callbacks = group[key];\n\t\tif (!callbacks) continue;\n\n\t\tfor (var i = 0; i < callbacks.length; i += 1) {\n\t\t\tvar callback = callbacks[i];\n\t\t\tif (callback.__calling) continue;\n\n\t\t\tcallback.__calling = true;\n\t\t\tcallback.call(component, newValue, oldValue);\n\t\t\tcallback.__calling = false;\n\t\t}\n\t}\n}\n\nfunction fire(eventName, data) {\n\tvar handlers =\n\t\teventName in this._handlers && this._handlers[eventName].slice();\n\tif (!handlers) return;\n\n\tfor (var i = 0; i < handlers.length; i += 1) {\n\t\thandlers[i].call(this, data);\n\t}\n}\n\nfunction get(key) {\n\treturn key ? this._state[key] : this._state;\n}\n\nfunction init(component, options) {\n\tcomponent._observers = { pre: blankObject(), post: blankObject() };\n\tcomponent._handlers = blankObject();\n\tcomponent._bind = options._bind;\n\n\tcomponent.options = options;\n\tcomponent.root = options.root || component;\n\tcomponent.store = component.root.store || options.store;\n}\n\nfunction observe(key, callback, options) {\n\tvar group = options && options.defer\n\t\t? this._observers.post\n\t\t: this._observers.pre;\n\n\t(group[key] || (group[key] = [])).push(callback);\n\n\tif (!options || options.init !== false) {\n\t\tcallback.__calling = true;\n\t\tcallback.call(this, this._state[key]);\n\t\tcallback.__calling = false;\n\t}\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = group[key].indexOf(callback);\n\t\t\tif (~index) group[key].splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction observeDev(key, callback, options) {\n\tvar c = (key = '' + key).search(/[^\\w]/);\n\tif (c > -1) {\n\t\tvar message =\n\t\t\t'The first argument to component.observe(...) must be the name of a top-level property';\n\t\tif (c > 0)\n\t\t\tmessage += \", i.e. '\" + key.slice(0, c) + \"' rather than '\" + key + \"'\";\n\n\t\tthrow new Error(message);\n\t}\n\n\treturn observe.call(this, key, callback, options);\n}\n\nfunction on(eventName, handler) {\n\tif (eventName === 'teardown') return this.on('destroy', handler);\n\n\tvar handlers = this._handlers[eventName] || (this._handlers[eventName] = []);\n\thandlers.push(handler);\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = handlers.indexOf(handler);\n\t\t\tif (~index) handlers.splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction onDev(eventName, handler) {\n\tif (eventName === 'teardown') {\n\t\tconsole.warn(\n\t\t\t\"Use component.on('destroy', ...) instead of component.on('teardown', ...) which has been deprecated and will be unsupported in Svelte 2\"\n\t\t);\n\t\treturn this.on('destroy', handler);\n\t}\n\n\treturn on.call(this, eventName, handler);\n}\n\nfunction set(newState) {\n\tthis._set(assign({}, newState));\n\tif (this.root._lock) return;\n\tthis.root._lock = true;\n\tcallAll(this.root._beforecreate);\n\tcallAll(this.root._oncreate);\n\tcallAll(this.root._aftercreate);\n\tthis.root._lock = false;\n}\n\nfunction _set(newState) {\n\tvar oldState = this._state,\n\t\tchanged = {},\n\t\tdirty = false;\n\n\tfor (var key in newState) {\n\t\tif (differs(newState[key], oldState[key])) changed[key] = dirty = true;\n\t}\n\tif (!dirty) return;\n\n\tthis._state = assign({}, oldState, newState);\n\tthis._recompute(changed, this._state);\n\tif (this._bind) this._bind(changed, this._state);\n\n\tif (this._fragment) {\n\t\tdispatchObservers(this, this._observers.pre, changed, this._state, oldState);\n\t\tthis._fragment.p(changed, this._state);\n\t\tdispatchObservers(this, this._observers.post, changed, this._state, oldState);\n\t}\n}\n\nfunction setDev(newState) {\n\tif (typeof newState !== 'object') {\n\t\tthrow new Error(\n\t\t\tthis._debugName + '.set was called without an object of data key-values to update.'\n\t\t);\n\t}\n\n\tthis._checkReadOnly(newState);\n\tset.call(this, newState);\n}\n\nfunction callAll(fns) {\n\twhile (fns && fns.length) fns.pop()();\n}\n\nfunction _mount(target, anchor) {\n\tthis._fragment.m(target, anchor);\n}\n\nfunction _unmount() {\n\tif (this._fragment) this._fragment.u();\n}\n\nfunction isPromise(value) {\n\treturn value && typeof value.then === 'function';\n}\n\nvar PENDING = {};\nvar SUCCESS = {};\nvar FAILURE = {};\n\nfunction removeFromStore() {\n\tthis.store._remove(this);\n}\n\nvar proto = {\n\tdestroy: destroy,\n\tget: get,\n\tfire: fire,\n\tobserve: observe,\n\ton: on,\n\tset: set,\n\tteardown: destroy,\n\t_recompute: noop,\n\t_set: _set,\n\t_mount: _mount,\n\t_unmount: _unmount\n};\n\nvar protoDev = {\n\tdestroy: destroyDev,\n\tget: get,\n\tfire: fire,\n\tobserve: observeDev,\n\ton: onDev,\n\tset: setDev,\n\tteardown: destroyDev,\n\t_recompute: noop,\n\t_set: _set,\n\t_mount: _mount,\n\t_unmount: _unmount\n};\n\nexport { blankObject, destroy, destroyDev, differs, dispatchObservers, fire, get, init, observe, observeDev, on, onDev, set, _set, setDev, callAll, _mount, _unmount, isPromise, PENDING, SUCCESS, FAILURE, removeFromStore, proto, protoDev, appendNode, insertNode, detachNode, detachBetween, detachBefore, detachAfter, reinsertBetween, reinsertChildren, reinsertAfter, reinsertBefore, destroyEach, createFragment, createElement, createSvgElement, createText, createComment, addListener, removeListener, setAttribute, setXlinkAttribute, getBindingGroupValue, toNumber, timeRangesToArray, children, claimElement, claimText, setInputType, setStyle, selectOption, selectOptions, selectValue, selectMultipleValue, linear, generateRule, hash, wrapTransition, transitionManager, noop, assign };\n","import {\n\tassign,\n\tblankObject,\n\tdiffers,\n\tdispatchObservers,\n\tget,\n\tobserve\n} from './shared.js';\n\nfunction Store(state) {\n\tthis._observers = { pre: blankObject(), post: blankObject() };\n\tthis._changeHandlers = [];\n\tthis._dependents = [];\n\n\tthis._computed = blankObject();\n\tthis._sortedComputedProperties = [];\n\n\tthis._state = assign({}, state);\n}\n\nassign(Store.prototype, {\n\t_add: function(component, props) {\n\t\tthis._dependents.push({\n\t\t\tcomponent: component,\n\t\t\tprops: props\n\t\t});\n\t},\n\n\t_init: function(props) {\n\t\tvar state = {};\n\t\tfor (var i = 0; i < props.length; i += 1) {\n\t\t\tvar prop = props[i];\n\t\t\tstate['$' + prop] = this._state[prop];\n\t\t}\n\t\treturn state;\n\t},\n\n\t_remove: function(component) {\n\t\tvar i = this._dependents.length;\n\t\twhile (i--) {\n\t\t\tif (this._dependents[i].component === component) {\n\t\t\t\tthis._dependents.splice(i, 1);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t},\n\n\t_sortComputedProperties: function() {\n\t\tvar computed = this._computed;\n\t\tvar sorted = this._sortedComputedProperties = [];\n\t\tvar cycles;\n\t\tvar visited = blankObject();\n\n\t\tfunction visit(key) {\n\t\t\tif (cycles[key]) {\n\t\t\t\tthrow new Error('Cyclical dependency detected');\n\t\t\t}\n\n\t\t\tif (visited[key]) return;\n\t\t\tvisited[key] = true;\n\n\t\t\tvar c = computed[key];\n\n\t\t\tif (c) {\n\t\t\t\tcycles[key] = true;\n\t\t\t\tc.deps.forEach(visit);\n\t\t\t\tsorted.push(c);\n\t\t\t}\n\t\t}\n\n\t\tfor (var key in this._computed) {\n\t\t\tcycles = blankObject();\n\t\t\tvisit(key);\n\t\t}\n\t},\n\n\tcompute: function(key, deps, fn) {\n\t\tvar store = this;\n\t\tvar value;\n\n\t\tvar c = {\n\t\t\tdeps: deps,\n\t\t\tupdate: function(state, changed, dirty) {\n\t\t\t\tvar values = deps.map(function(dep) {\n\t\t\t\t\tif (dep in changed) dirty = true;\n\t\t\t\t\treturn state[dep];\n\t\t\t\t});\n\n\t\t\t\tif (dirty) {\n\t\t\t\t\tvar newValue = fn.apply(null, values);\n\t\t\t\t\tif (differs(newValue, value)) {\n\t\t\t\t\t\tvalue = newValue;\n\t\t\t\t\t\tchanged[key] = true;\n\t\t\t\t\t\tstate[key] = value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tc.update(this._state, {}, true);\n\n\t\tthis._computed[key] = c;\n\t\tthis._sortComputedProperties();\n\t},\n\n\tget: get,\n\n\tobserve: observe,\n\n\tonchange: function(callback) {\n\t\tthis._changeHandlers.push(callback);\n\t\treturn {\n\t\t\tcancel: function() {\n\t\t\t\tvar index = this._changeHandlers.indexOf(callback);\n\t\t\t\tif (~index) this._changeHandlers.splice(index, 1);\n\t\t\t}\n\t\t};\n\t},\n\n\tset: function(newState) {\n\t\tvar oldState = this._state,\n\t\t\tchanged = this._changed = {},\n\t\t\tdirty = false;\n\n\t\tfor (var key in newState) {\n\t\t\tif (this._computed[key]) throw new Error(\"'\" + key + \"' is a read-only property\");\n\t\t\tif (differs(newState[key], oldState[key])) changed[key] = dirty = true;\n\t\t}\n\t\tif (!dirty) return;\n\n\t\tthis._state = assign({}, oldState, newState);\n\n\t\tfor (var i = 0; i < this._sortedComputedProperties.length; i += 1) {\n\t\t\tthis._sortedComputedProperties[i].update(this._state, changed);\n\t\t}\n\n\t\tfor (var i = 0; i < this._changeHandlers.length; i += 1) {\n\t\t\tthis._changeHandlers[i](this._state, changed);\n\t\t}\n\n\t\tdispatchObservers(this, this._observers.pre, changed, this._state, oldState);\n\n\t\tvar dependents = this._dependents.slice(); // guard against mutations\n\t\tfor (var i = 0; i < dependents.length; i += 1) {\n\t\t\tvar dependent = dependents[i];\n\t\t\tvar componentState = {};\n\t\t\tdirty = false;\n\n\t\t\tfor (var j = 0; j < dependent.props.length; j += 1) {\n\t\t\t\tvar prop = dependent.props[j];\n\t\t\t\tif (prop in changed) {\n\t\t\t\t\tcomponentState['$' + prop] = this._state[prop];\n\t\t\t\t\tdirty = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (dirty) dependent.component.set(componentState);\n\t\t}\n\n\t\tdispatchObservers(this, this._observers.post, changed, this._state, oldState);\n\t}\n});\n\nexport { Store };","function RssParser() {\n  const DC_NAMESPACE = 'http://purl.org/dc/elements/1.1/';\n  const RDF_NAMESPACE = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#';\n  const ISO_DATE_PATTERN = /([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9:]+).*$/;\n\n  // IE does not know forEach or map on node lists\n  const forEach = Array.prototype.forEach;\n  const map = Array.prototype.map;\n\n  const getDocument = function(xml) {\n    if (!xml) return;\n\n    let doc;\n\n    if (document.implementation.createDocument) {\n      const parser = new DOMParser();\n      doc = parser.parseFromString(xml, 'application/xml');\n    } else if (window.ActiveXObject) {\n      doc = new window.ActiveXObject('Microsoft.XMLDOM');\n      doc.async = 'false';\n      doc.loadXML(xml);\n    }\n\n    return doc;\n  };\n\n  const getChildElement = function(name, parent, namespace) {\n    if (!name || !parent) return null;\n    let method = 'getElementsByTagName';\n    if (namespace) method += 'NS';\n    return parent[method](name, namespace)[0];\n  };\n\n  const getText = function(node) {\n    if (!node) return '';\n    if (node.length) node = node[0];\n    return node.textContent;\n  };\n\n  const error = Error('Malformed RSS syntax');\n\n  const parseRss = function(root, type) {\n    const rss = { items: [] };\n    const channel = getChildElement('channel', root);\n\n    if (!channel) throw error;\n\n    rss.format = 'RSS';\n    rss.version = type === 'rdf:RDF' ? '1.0' : root.getAttribute('version');\n    rss.title = getText(getChildElement('title', channel));\n    rss.description = getText(getChildElement('description', channel));\n    rss.link = getText(getChildElement('link', channel));\n\n    const image = getChildElement('image', channel);\n\n    rss.image = image\n      ? {\n          source: getText(getChildElement('url', image)) || image.getAttributeNS(RDF_NAMESPACE, 'resource'),\n          title: getText(getChildElement('title', image)),\n          link: getText(getChildElement('link', image)),\n          width: getText(getChildElement('width', image)),\n          height: getText(getChildElement('height', image)),\n          description: getText(getChildElement('description', image))\n        }\n      : '';\n\n    if (type === 'rdf:RDF') {\n      const date = channel.getElementsByTagNameNS(DC_NAMESPACE, 'date');\n      rss.date = getDate(getText(date));\n      rss.rights = getText(channel.getElementsByTagNameNS(DC_NAMESPACE, 'creator'));\n\n      const textInput = getChildElement('textinput', root);\n\n      rss.input = textInput\n        ? {\n            link: getText(getChildElement('link', textInput)),\n            description: getText(getChildElement('description', textInput)),\n            name: getText(getChildElement('name', textInput)),\n            title: getText(getChildElement('title', textInput))\n          }\n        : '';\n    } else {\n      rss.date = getDate(\n        getText(getChildElement('lastBuildDate', channel)) || getText(getChildElement('pubDate', channel))\n      );\n      rss.rights = getText(getChildElement('copyright', channel));\n    }\n\n    forEach.call(root.getElementsByTagName('item'), function(node) {\n      const item = {\n        title: getText(getChildElement('title', node)),\n        description: getText(getChildElement('description', node)),\n        link: getText(getChildElement('link', node)) || getText(getChildElement('guid', node))\n      };\n\n      if (!item.description) {\n        let content = getText(getChildElement('encoded', node, 'content'));\n        if (content) {\n          item.description = content;\n        } else {\n          content = getText(getChildElement('encoded', node));\n          if (content) {\n            item.description = content;\n          }\n        }\n      }\n\n      addItemExtensions(node, item);\n      rss.items.push(item);\n    });\n\n    return rss;\n  };\n\n  const parseAtom = function(root) {\n    const rss = { items: [] };\n\n    rss.format = 'Atom';\n    rss.version = '1.0';\n    rss.title = getText(getChildElement('title', root));\n    rss.description = getText(getChildElement('subtitle', root));\n    rss.image = '';\n\n    const link = getChildElement('link:not([self])', root);\n    if (link) rss.link = link.getAttribute('href');\n\n    rss.date = getDate(getChildElement('updated', root));\n\n    forEach.call(root.getElementsByTagName('entry'), function(node) {\n      const item = {\n        title: getText(getChildElement('title', node)),\n        description: getText(getChildElement('summary', node))\n      };\n\n      const link = getChildElement('link', node);\n      if (link) item.link = link.getAttribute('href');\n\n      rss.items.push(item);\n    });\n\n    return rss;\n  };\n\n  const parseScriptingNews = function(root) {\n    const rss = { items: [] };\n    const channel = getChildElement('header', root);\n\n    if (!channel) throw error;\n\n    rss.format = 'Scripting News';\n    rss.version = getText(getChildElement('scriptingNewsVersion', channel));\n    rss.title = getText(getChildElement('channelTitle', channel));\n    rss.description = getText(getChildElement('channelDescription', channel));\n    rss.link = getText(getChildElement('channelLink', channel));\n\n    rss.date = getDate(\n      getText(getChildElement('lastBuildDate', channel)) || getText(getChildElement('pubDate', channel))\n    );\n\n    const imageUrl = getChildElement('imageUrl', channel);\n\n    if (imageUrl) {\n      rss.image = {\n        source: getText(imageUrl),\n        title: getText(getChildElement('imageTitle', channel)),\n        link: getText(getChildElement('imageLink', channel)),\n        width: getText(getChildElement('imageWidth', channel)),\n        height: getText(getChildElement('imageHeight', channel)),\n        description: getText(getChildElement('imageCaption', channel))\n      };\n    }\n\n    forEach.call(root.getElementsByTagName('item'), function(node) {\n      const item = { title: '' };\n\n      item.description = getText(getChildElement('text', node)).replace(/\\n/g, ' ');\n\n      const link = getChildElement('link', node);\n\n      if (link) {\n        const text = getText(getChildElement('linetext', link))\n          .replace(/\\n/g, ' ')\n          .trim();\n        if (text) {\n          item.description = item.description.replace(\n            new RegExp(text),\n            '<a href=\"' + getText(getChildElement('url', node)) + '\">' + text + '</a>'\n          );\n        }\n        item.link = getText(getChildElement('url', link));\n      }\n\n      addItemExtensions(node, item);\n      rss.items.push(item);\n    });\n\n    return rss;\n  };\n\n  const addItemExtensions = function(node, item) {\n    const source = getChildElement('source', node);\n    const enclosures = node.getElementsByTagName('enclosure');\n    const category = getChildElement('category', node);\n\n    if (source) {\n      item.source = {\n        url: source.getAttribute('url'),\n        title: source.textContent\n      };\n    }\n\n    item.enclosures = map.call(enclosures, enclosure => {\n      return {\n        url: enclosure.getAttribute('url'),\n        length: enclosure.getAttribute('length'),\n        type: enclosure.getAttribute('type')\n      };\n    });\n\n    if (category) {\n      item.category = {\n        domain: category.getAttribute('domain') || '',\n        content: category.textContent\n      };\n    }\n\n    return item;\n  };\n\n  const getDate = function(str) {\n    let millis = Date.parse(str);\n\n    if (isNaN(millis)) {\n      millis = Date.parse(String(str).replace(ISO_DATE_PATTERN, '$1/$2/$3 $4'));\n      if (isNaN(millis)) millis = Date.now();\n    }\n\n    return new Date(millis);\n  };\n\n  return {\n    parse: function(xml) {\n      const doc = getDocument(xml);\n      const root = doc.documentElement;\n      const type = root.nodeName;\n\n      switch (type) {\n        case 'feed':\n          return parseAtom(root);\n\n        case 'scriptingNews':\n          return parseScriptingNews(root);\n\n        default:\n          return parseRss(root, type);\n      }\n    }\n  };\n}\n\nexport { RssParser };\n","const mode = 'stage';\nconst root = 'http://192.168.8.101';\n\nconst urls = (settings => {\n  return settings[mode] || {};\n})({\n  dev: {\n    base: root + ':5000',\n    app: root + ':5000/app.html',\n    proxy: root + ':8081/roxy',\n    referrers: root + ':8081/ferris?group=rssbox'\n  },\n\n  stage: {\n    base: 'https://p3k.org/rss/18.1.0',\n    app: 'https://p3k.org/rss/18.1.0/app.html',\n    proxy: 'https://6-dot-p3k-services.appspot.com/roxy',\n    referrers: 'https://6-dot-p3k-services.appspot.com/ferris?group=rssbox'\n  },\n\n  mixed: {\n    base: root + ':5000',\n    app: root + ':5000/app.html',\n    proxy: 'https://6-dot-p3k-services.appspot.com/roxy',\n    referrers: 'https://6-dot-p3k-services.appspot.com/ferris?group=rssbox'\n  }\n});\n\n//urls.default = urls.base + '/test/sampleRssAtom.xml';\n//urls.default = 'http://www.wienerzeitung.at/_export/rss/nachrichten/schlagzeilen/index.rss';\n\nexport { urls };\n","import { urls as localUrls } from './local';\n\n// These are backwards-compatible settings\nexport const defaults = {\n  boxFillColor: '#fff',\n  compact: false,\n  fontFace: '10pt sans-serif',\n  frameColor: '#000',\n  headless: false,\n  height: -1,\n  linkColor: '',\n  maxItems: 7,\n  radius: 0,\n  showXmlButton: false,\n  textColor: '#000',\n  titleBarColor: '#add8e6',\n  titleBarTextColor: '#000',\n  width: 200\n};\n\nexport const keys = [\n  'align',\n  'boxFillColor',\n  'compact',\n  'fontFace',\n  'frameColor',\n  'headless',\n  'height',\n  'linkColor',\n  'maxItems',\n  'radius',\n  'showXmlButton',\n  'textColor',\n  'titleBarColor',\n  'titleBarTextColor',\n  'url',\n  'width'\n];\n\nconst rootUrl = '//p3k.org';\nconst serviceUrl = '//p3k-services.appspot.com';\n\nexport const urls = Object.assign(\n  {\n    base: rootUrl,\n    app: rootUrl + '/rss',\n    proxy: location.protocol + serviceUrl + '/roxy',\n    referrers: location.protocol + serviceUrl + '/ferris?group=rssbox',\n    default: 'https://blog.p3k.org/stories.xml'\n  },\n  localUrls\n);\n","import { urls } from './settings';\n\nconst defaultError = {\n  loading: false,\n  compact: false,\n  headless: false,\n  maxItems: 3,\n  height: -1,\n  format: 'Error',\n  version: '❌',\n  link: urls.base,\n  title: 'RSS Box Error',\n  description:\n    'This output was automatically generated to report an error that occurred during a request to the  RSS Box Viewer.',\n  items: [\n    {\n      title: 'Oops, something went wrong…',\n      description: 'An error occurred while processing the request to the RSS Box Viewer.'\n    },\n    {\n      title: 'The following error message was returned:',\n      description: 'Unknown error'\n    },\n    { title: '' }\n  ]\n};\n\nexport default function(url, message) {\n  const error = Object.assign({}, defaultError);\n  error.items[1].description = message;\n  error.items[2].description = `Most likely, this might have happened because of a non-existent or invalid RSS feed URL. <a href=\"https://validator.w3.org/feed/check.cgi?url=${url}\">Please check</a> and possibly correct your input, then try again.`;\n  return error;\n}\n","import { Store } from 'svelte/store';\nimport { RssParser } from './RssParser';\nimport { urls, defaults } from './settings';\nimport error from './error';\n\nexport default class RssStore extends Store {\n  constructor() {\n    const settings = {\n      date: new Date(),\n      description: '',\n      format: '',\n      image: '',\n      input: '',\n      items: [],\n      title: '',\n      version: ''\n    };\n\n    super(settings);\n\n    this.compute('formattedDate', ['date'], date => {\n      if (!date) return;\n      let month = (date.getMonth() + 1).toString().padStart(2, '0');\n      let day = date\n        .getDate()\n        .toString()\n        .padStart(2, '0');\n      let hours = date\n        .getHours()\n        .toString()\n        .padStart(2, '0');\n      let minutes = date\n        .getMinutes()\n        .toString()\n        .padStart(2, '0');\n      return `${date.getFullYear()}-${month}-${day}, ${hours}:${minutes}h`;\n    });\n\n    this.observe('url', this.fetch, { init: false });\n  }\n\n  fetch() {\n    const url = this.get('url');\n    if (!url) return;\n\n    this.set({ loading: true });\n\n    fetch(urls.proxy + '?url=' + encodeURIComponent(url))\n      .then(res => {\n        if (!res.ok) throw Error(res.statusText);\n\n        res\n          .text()\n          .then(json => {\n            const parser = RssParser();\n            const data = JSON.parse(json);\n            if (data.headers['X-Roxy-Error']) throw Error(data.headers['X-Roxy-Error']);\n            const rss = parser.parse(data.content);\n            if (!rss.date) rss.date = new Date(data.headers.date);\n            rss.loading = false;\n            this.set(rss);\n          })\n          .catch(message => {\n            this.set(error(url, message));\n          });\n      })\n      .catch(message => {\n        this.set(error(url, message));\n      });\n  }\n}\n","<a class='FlattrButton' style='display:none;' data-flattr-button='compact' data-flattr-popout=0 href='//p3k.org/rss'></a>\n\n<script>\n  (function() {\n      var s = document.createElement('script'), t = document.getElementsByTagName('script')[0];\n      s.type = 'text/javascript';\n      s.async = true;\n      s.src = '//api.flattr.com/js/0.6/load.js?mode=auto';\n      t.parentNode.insertBefore(s, t);\n  })();\n</script>\n","<div>\n  <small><i>“JavaScript RSS Viewer puts little or long customizable RSS boxes anywhere you put HTML; build your own slashbox hell or heaven, it’s feedarific!” — <a href='http://ourpla.net/cgi/pikie'>Abbe Normal</a></i></small>\n</div>\n\n<h2>{{ $appDescription }} {{ $appVersion }}</h2>\n\n<p class='msg warning'>\n  <strong>Reduced availability due to temporary violation of quota limit.</strong> You should <a href='//github.com/p3k/json3k'>install your own JSONP proxy</a>. You can always support the project with your <a href='http://flattr.com/thing/681881/JavaScript-RSS-Box-Viewer'>donation</a>.\n</p>\n\n<p>\n  This viewer can display <a href='http://en.wikipedia.org/wiki/RSS'>RSS</a> feeds of version <a href='http://cyber.law.harvard.edu/rss/examples/sampleRss091.xml' on:click='goto(event)'>0.91</a>, <a href='http://cyber.law.harvard.edu/rss/examples/sampleRss092.xml' on:click='goto(event)'>0.92</a>, <a href='http://rss.orf.at/fm4.xml' on:click='goto(event)'>1.0</a> and <a href='http://blog.p3k.org/stories.xml' on:click='goto(event)'>2.0</a> as well as even the good old legacy format <a href='http://essaysfromexodus.scripting.com/xml/scriptingNews2.xml' on:click='goto(event)'>Scripting News 2</a>. There is also basic support for <a href='https://www.theregister.co.uk/headlines.atom' on:click='goto(event)'>Atom 1.0</a>.\n</p>\n\n<p>\n  It provides a simple way to embed such RSS boxes in any <a href='http://validator.w3.org/'>valid HTML document</a> via an automagically generated JavaScript tag — <i>for free!</i>\n</p>\n\n<p>\n  Just enter the URL of any compatible RSS feed, modify the layout settings as you like and push the Reload button. When finished, copy the HTML code into your own web page – and voilà!\n</p>\n\n<p>\n  The code behind this is written in JavaScript and runs completely in your browser*. You can get the source code together with all the other necessary files from the <a href='//github.com/p3k/rss-box'>Github repository</a>.\n</p>\n\n<p>\n  <small>* A proxy server is needed for cross-origin requests.</small>\n</p>\n\n<p>\n  <Flattr/>\n</p>\n\n<Changes/>\n\n<h3>Future Development</h3>\n\n<p>\n  I have ceased actively developing this viewer but sometimes I get enthusiastic and fiddle around with the code. Of course it will be available here as is.\n</p>\n<p>\n  For questions and comments feel free to contact me (Tobi) via e-mail: <a href='mailto:&#109;&#97;&#105;&#108;&#43;&#114;&#115;&#115;&#64;&#112;&#51;&#107;&#46;&#111;&#114;&#103;'>&#109;&#97;&#105;&#108;&#43;&#114;&#115;&#115;&#64;&#112;&#51;&#107;&#46;&#111;&#114;&#103;</a>.\n</p>\n\n<h3>License</h3>\n\n<p>\n  <span xmlns:dct=\"http://purl.org/dc/terms/\" property=\"dct:title\">JavaScript RSS Box Viewer</span> by\n  <a xmlns:cc=\"http://creativecommons.org/ns#\" href=\"http://p3k.org/rss\" property=\"cc:attributionName\" rel=\"cc:attributionURL\">Tobi Schäfer</a> is licensed under a <a rel=\"license\" href=\"http://creativecommons.org/licenses/by-sa/3.0/at/deed.en_US\">Creative Commons Attribution-ShareAlike 3.0 Austria License</a>.\n</p>\n<p>\n  Based on a work at <a xmlns:dct=\"http://purl.org/dc/terms/\" href=\"https://p3k.org/source/svn/rss-box/trunk/\" rel=\"dct:source\">https://p3k.org/source/svn/rss-box/trunk/</a>.\n</p>\n<p>\n  <a rel=\"license\" href=\"http://creativecommons.org/licenses/by-sa/3.0/at/deed.en_US\">\n    <img alt=\"Creative Commons License\" style=\"border-width:0\" src=\"//i.creativecommons.org/l/by-sa/3.0/at/88x31.png\" />\n  </a>\n</p>\n\n<small>Thank you, <a href='//p3k.org/'>p3k.org</a>!</small>\n\n<style>\n  h3 {\n    display: inline-block;\n  }\n\n  h3 + p {\n    margin-top: 0;\n  }\n\n  small {\n    color: #bbb;\n  }\n\n  .warning {\n    border-color: #e44;\n    background: #fdd;\n  }\n</style>\n\n<script>\n  import Changes from './Changes.html';\n  import Flattr from './Flattr.html';\n\n  export default {\n    oncreate() {\n      this.store.observe('appDescription', description => {\n        document.title = description;\n      });\n    },\n\n    components: {\n      Changes,\n      Flattr\n    },\n\n    methods: {\n      goto(event) {\n        event.preventDefault();\n        this.store.set({ url: event.target.href });\n      }\n    }\n  }\n</script>\n","<!-- Move async script loader into app.html file -->\n\n<ins class=\"adsbygoogle\"\n     style=\"display:block\"\n     data-ad-client=\"ca-pub-3965028043153138\"\n     data-ad-slot=\"6370257451\"\n     data-ad-format=\"auto\"></ins>\n\n<script>\n(window.adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n<style>\n  ins {\n    margin-bottom: 1em;\n  }\n</style>\n","<div data-link-color='{{ $linkColor }}' class='rssbox rssBox' style='max-width: {{ $width }}px; border-color: {{ $frameColor }}; border-radius: {{ $radius }}px; font: {{ $fontFace }};'>\n  {{ #if !$headless }}\n    <div class='rssbox-titlebar' style='color: {{ $titleBarTextColor }}; background-color: {{ $titleBarColor }}; border-bottom-color: {{ $frameColor }};'>\n      {{ #if $showXmlButton }}\n        <div class='rssbox-icon'>\n          <a href='{{ $url }}' title='{{ $format }} {{ $version }}' style='color: {{ $titleBarTextColor }}'>\n            <RssIcon/>\n          </a>\n        </div>\n      {{ /if }}\n      <div>\n        <a href='{{ $link }}' style='color: {{ $titleBarTextColor }};'>\n          {{ $title }}\n        </a>\n      </div>\n      <div class='rssbox-date'>\n        {{ $formattedDate }}\n      </div>\n    </div>\n  {{ /if }}\n\n  <div class='rssbox-content rssBoxContent' style='background-color: {{ $boxFillColor }}; height: {{ height }};'>\n    {{ #if $image && !$compact }}\n      {{ #await load($image) }}\n      {{ then image }}\n        <a href='{{ $image.link }}' title='{{ $image.title }}'>\n          <div alt='{{ $image.description }}' class='rssbox-image' style='background-image: url({{ $image.source }}); width: {{ image.width }}; height: {{ image.height }};'></div>\n        </a>\n      {{ /await }}\n    {{ /if }}\n\n    {{ #each $items as item, index }}\n      {{ #if index < $maxItems }}\n        <div class='rssbox-item-content rssBoxItemContent' style='color: {{ $textColor }}'>\n          {{ #if item.title }}\n            <div style='font-weight: {{ $fontWeight }};'>\n              <a href='{{ item.link }}'>\n                {{{ item.title }}}\n              </a>\n            </div>\n          {{ /if }}\n\n          {{ #if !$compact }}\n            <aside>\n              {{ #if item.source }}\n                <a href='{{ item.source.url }}' title='{{ item.source.title }}' class='rssbox-source'>\n                  {{ #if item.source.url.endsWith('.xml') }}\n                    <RssIcon/>\n                  {{ else }}\n                    <LinkIcon/>\n                  {{ /if }}\n                </a>\n              {{ /if }}\n\n              {{ #if item.enclosures }}\n                {{ #each item.enclosures as enclosure }}\n                  <a href='{{ enclosure.url }}' title='{{ kb(enclosure.length) }} {{ enclosure.type }}' class='rssbox-enclosure'>\n                    <PaperclipIcon/>\n                  </a>\n                {{ /each }}\n              {{ /if }}\n            </aside>\n            {{{ item.description }}}\n          {{ /if }}\n        </div>\n      {{ /if }}\n    {{ /each }}\n\n    {{ #if $input }}\n      <form class='rssbox-form' method='get' action='{{ $input.link }}'>\n        <input type='text' name='{{ $input.name }}' placeholder='Enter search &amp; hit return…' data-placeholder='{{ $input.description }}'>\n        <!-- input type='submit' value='{{ $input.title }}' -->\n      </form>\n    {{ /if }}\n    <div class='rssbox-promo rssBoxPromo'>\n      <a href='{{ appUrl() }}' style='color: {{ $textColor }}'>RSS Box by p3k.org</a>\n    </div>\n  </div>\n</div>\n\n<style>\n  .rssbox {\n    float: left;\n    box-sizing: border-box;\n    width: 100%;\n    border: 1px solid #000;\n    font-family: sans-serif;\n    overflow: hidden;\n    border-radius: 0;\n    -moz-border-radius: 0;\n  }\n\n  .rssbox-icon {\n    float: right;\n    width: 1em;\n    margin-left: 0.5em;\n  }\n\n  .rssbox-titlebar {\n    padding: 0.5em;\n    color: #000;\n    background-color: #add8e6;\n    border-bottom: 1px solid #000;\n    font-weight: bold;\n  }\n\n  .rssbox-content {\n    height: auto;\n    padding: 0.5em;\n    overflow-x: hidden;\n    overflow-y: auto;\n    background-color: #fff;\n    clear: both;\n  }\n\n  .rssbox-content aside {\n    clear: both;\n    float: right;\n  }\n\n  .rssbox-content aside a {\n    display: block;\n    margin-left: 0.5em;\n  }\n\n  .rssbox-image {\n    float: right;\n    margin: 0 0 0.5em 0.5em;\n    background-position: left center;\n    background-repeat: no-repeat;\n    background-size: contain;\n  }\n\n  .rssbox-enclosure, .rssbox-source {\n    display: block;\n    width: 1em;\n  }\n\n  .rssbox-form {\n    margin-bottom: 0.8em;\n  }\n\n  .rssbox-form input {\n    padding: 0.5em;\n    background-color: #fff;\n  }\n\n  .rssbox-date {\n    margin-top: 0.1em;\n    font-size: 0.8em;\n    font-weight: normal;\n  }\n\n  .rssbox-promo {\n    text-align: right;\n    font-size: 0.7em;\n    letter-spacing: 0.01em;\n  }\n</style>\n\n<script>\n  import { urls } from '../src/settings';\n  import LinkIcon from './LinkIcon.html';\n  import RssIcon from './RssIcon.html';\n  import PaperclipIcon from './PaperclipIcon.html';\n\n  if (location.href.indexOf(urls.base) < 0) {\n    fetch(urls.referrers + '&url=' + encodeURIComponent(location.href));\n  }\n\n  export default {\n    components: {\n      LinkIcon,\n      PaperclipIcon,\n      RssIcon\n    },\n\n    oncreate() {\n      const staticId = 'rssbox-static-stylesheet';\n      const dynamicId = 'rssbox-dynamic-stylesheet';\n\n      let staticCss = window[staticId];\n      let dynamicCss = window[dynamicId];\n\n      if (!staticCss) {\n        staticCss = document.createElement('link');\n        staticCss.id = staticId;\n        staticCss.rel = 'stylesheet';\n        staticCss.href = urls.base + '/box.css';\n        document.head.appendChild(staticCss);\n      }\n\n      if (!dynamicCss) {\n        dynamicCss = document.createElement('style');\n        dynamicCss.id = dynamicId;\n        document.head.appendChild(dynamicCss);\n      }\n\n      this.store.observe('compact', compact => {\n        this.store.set({ fontWeight: compact ?  'initial' : 'bold' });\n      });\n\n      this.store.observe('linkColor', color => {\n        if (!color) return;\n\n        let rule =\n          `.rssbox[data-link-color=\"${color}\"] a {\n            color: ${color};\n          }`;\n\n        if (dynamicCss.innerHTML.indexOf(rule) < 0) dynamicCss.innerHTML += rule;\n      });\n    },\n\n    helpers: {\n      kb(bytes) {\n        return (bytes / 1000).toFixed(2) + 'kB';\n      },\n\n      appUrl() {\n        return urls.app;\n      },\n\n      load(data) {\n        return new Promise(fulfill => {\n          const image = new Image();\n\n          image.onload = () => {\n            const maxWidth = Math.min(100, image.width);\n            const factor = image.width > maxWidth ? maxWidth / image.width : 1;\n\n            fulfill({\n              width: (image.width * factor) + 'px',\n              height: (image.height * factor) + 'px'\n            });\n          };\n\n          image.src = data.source;\n        });\n      }\n    },\n\n    computed: {\n      height: $height => $height && $height > -1 ? $height + 'px' : '100%'\n    }\n  };\n</script>\n","<details on:toggle='update(event)'>\n  <summary></summary>\n  {{ #if referrers.length }}\n    {{ #each referrers as referrer }}\n      <div class='referrer'>\n        <code>{{ format(referrer.percentage) }}</code>\n        <a href='{{ referrer.url }}'>{{ referrer.host }}</a>\n      </div>\n    {{ /each }}\n  {{ else }}\n    Loading…\n  {{ /if }}\n</details>\n\n<style>\n  details {\n    line-height: 1.2em;\n  }\n\n  code {\n    margin-right: 0.5em;\n    color: #bbb;\n    font-size: 0.7em;\n    white-space: pre;\n  }\n\n  summary {\n    outline: none;\n  }\n\n  .referrer {\n    white-space: nowrap;\n  }\n</style>\n\n<script>\n  import { urls } from '../src/settings';\n\n  let loaded = false;\n\n  export default {\n    oncreate() {\n      if ('open' in document.createElement('details') === false) {\n        this.load();\n      }\n    },\n\n    data() {\n      return {\n        referrers: []\n      }\n    },\n\n    helpers: {\n      format: float => {\n        if (float < 0.01) return '< 0.01';\n        return float.toFixed(2).padStart(6)\n      }\n    },\n\n    methods: {\n      update(event) {\n        if (event.target.open && !loaded) this.load();\n      },\n\n      load() {\n        fetch(urls.referrers).then(res => {\n          res.json().then(data => this.display(data));\n        });\n      },\n\n      display(data) {\n        const hosts = data.reduce((accu, item) => {\n          if (item.url.startsWith('http') && !item.url.startsWith(urls.base)) {\n            const url = item.url.replace(/^([^.]*)www\\./, '$1');\n            const host = url.split('/')[2];\n            let data = accu[host];\n\n            if (!data) {\n              data = { host, url, hits: item.hits, total: 0 };\n              accu[host] = data;\n              accu.push(data);\n            } else if (item.hits > data.hits) {\n              data.url = item.url;\n              data.hits = item.hits;\n            }\n\n            data.total += item.hits;\n          }\n          return accu;\n        }, []);\n\n        const total = hosts.reduce((accu, item) => accu += item.total, 0);\n\n        const referrers = hosts.map(item => {\n          item.percentage = item.total / total * 100;\n          return item;\n        });\n\n        referrers.sort((a, b) => b.percentage - a.percentage);\n\n        this.set({ referrers });\n        loaded = true;\n      }\n    }\n  }\n</script>\n","<form on:submit='update(event)'>\n  <table class='table'>\n    <colgroup>\n      <col width='*'>\n      <col width='90%'>\n    </colgroup>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Feed URL</label>\n      </td>\n      <td>\n        <input type='url' name='url' value='{{ $url }}' required on:change='update(event)'>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label>Title</label>\n      </td>\n      <td>{{ $title }}</td>\n    </tr>\n    <tr>\n      <td class='top'>\n        <label on:click='label(event)'>Description</label>\n      </td>\n      <td>\n        <details>\n          <summary></summary>\n          {{ $description }}\n        </details>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label>Last build</label>\n      </td>\n      <td>{{ $formattedDate }}</td>\n    </tr>\n    <tr>\n      <td>\n        <label>Source</label>\n      </td>\n      <td class='source'>\n        {{ #if $loading }}\n          Loading...\n        {{ else }}\n          <a href='{{ $url }}'>{{ $format }} {{ $version }}</a>\n        {{ /if }}\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Max. items</label>\n      </td>\n      <td>\n        <input type='number' name='maxItems' value='{{ $maxItems }}' min=1 max=99 required on:change='update(event)'>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Max. width</label>\n      </td>\n      <td>\n        <input type='number' name='width' value='{{ $width }}' min=100 max=9999 on:change='update(event)' placeholder='spare'>\n        <small>px</small>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Content height</label>\n      </td>\n      <td>\n        <input type='number' name='height' value='{{ $height }}' min=100 max=9999 on:change='update(event)' placeholder='spare'>\n        <small>px</small>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Corner radius</label>\n      </td>\n      <td>\n        <input type='number' name='radius' value='{{ $radius }}' min=0 max=20 required on:change='update(event)'>\n        <small>px</small>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>XML button</label>\n      </td>\n      <td>\n        <input type='checkbox' name='showXmlButton' value='1' checked='{{ $showXmlButton }}' on:change='update(event)'>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Compact view</label>\n      </td>\n      <td>\n        <input type='checkbox' name='compact' value='1' checked='{{ $compact }}' on:change='update(event)'>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Headless</label>\n      </td>\n      <td>\n        <input type='checkbox' name='headless' value='1' checked='{{ $headless }}' on:change='update(event)'>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Frame color</label>\n      </td>\n      <td>\n        <input type='color' name='frameColor' value='{{ $frameColor }}' size=6 maxlength=7 on:change='update(event)'>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Titlebar color</label>\n      </td>\n      <td>\n        <input type='color' name='titleBarColor' value='{{ $titleBarColor }}' size=6 maxlength=7 on:change='update(event)'>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Title color</label>\n      </td>\n      <td>\n        <input type='color' name='titleBarTextColor' value='{{ $titleBarTextColor }}' size=6 maxlength=7 on:change='update(event)'>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Box color</label>\n      </td>\n      <td>\n        <input type='color' name='boxFillColor' value='{{ $boxFillColor }}' size=6 maxlength=7 on:change='update(event)'>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Text color</label>\n      </td>\n      <td>\n        <input type='color' name='textColor' value='{{ $textColor }}' size=6 maxlength=7 on:change='update(event)'>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Link color</label>\n      </td>\n      <td>\n        <input type='color' name='linkColor' value='{{ $linkColor }}' size=6 maxlength=7 on:change='update(event)'>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>Font face</label>\n      </td>\n      <td>\n        <input name='fontFace' value='{{ $fontFace }}' on:change='update(event)' pattern='[\\d.]+(?:pt|px|em|%)+\\s+[\\s\\w\\-,]+' placeholder='e.g. 10pt Helvetica, sans-serif'>\n      </td>\n    </tr>\n    <tr>\n      <td></td>\n      <td>\n        {{ #if $loading }}\n          <button class='btn btn-sm btn-c' disabled>Loading...</button>\n        {{ else }}\n          <button class='btn btn-sm btn-b' type='button' on:click='reload(event)'>Reload</button>\n        {{ /if }}\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <label on:click='label(event)'>\n          HTML code<br>\n          (copy&amp;pasta)\n        </label>\n      </td>\n      <td>\n        <textarea name='code' cols='10' rows='3' readonly on:click='copy(event)'>{{ $code }}</textarea>\n      </td>\n    </tr>\n    <tr>\n      <td class='top'>\n        <label on:click='label(event)'>\n          Referrers<br>\n          (last 24 hours)\n        </label>\n      </td>\n      <td class='top'>\n        <Referrers/>\n      </td>\n    </tr>\n  </table>\n</form>\n\n<style>\n  table {\n    overflow: auto;\n  }\n\n  tr td:first-child {\n    color: #bbb;\n    text-align: right;\n    white-space: nowrap;\n  }\n\n  summary {\n    outline: none;\n  }\n\n  .top {\n    vertical-align: top;\n  }\n\n  .source {\n    line-height: 1em;\n  }\n\n  [name=url], [name=fontFace], [name=code] {\n    width: 90%;\n  }\n\n  [type=color], [type=number] {\n    width: 50px;\n  }\n\n  [name=code] {\n    color: #bbb;\n  }\n</style>\n\n<script>\n  import Referrers from './Referrers.html';\n\n  export default {\n    components: {\n      Referrers\n    },\n\n    methods: {\n      update(event) {\n        event.preventDefault();\n        if (!event.target.checkValidity()) return event.target.reportValidity();\n        const name = event.target.name;\n        const type = event.target.type;\n        const value = event.target[type === 'checkbox' ? 'checked' : 'value'];\n        this.store.set({ [name]: value });\n      },\n\n      reload(event) {\n        event.preventDefault();\n        const url = this.store.get('url');\n        this.store.set({ url: null });\n        this.store.set({ url });\n      },\n\n      copy(event) {\n        try {\n          event.target.select();\n          document.execCommand('copy');\n        } catch (error) { }\n      },\n\n      label(event) {\n        const sibling = event.target.parentNode.nextElementSibling;\n        let input = sibling.querySelector('input');\n        if (!input) input = sibling.querySelector('summary');\n        if (!input) input = sibling.querySelector('textarea');\n        if (!input) return;\n        if (input.click) input.click();\n        if (input.select) input.select();\n      }\n    }\n  }\n</script>\n","import '../src/shims';\nimport RssStore from './RssStore';\nimport { description, version } from '../package.json';\n\nimport App from '../components/App.html';\nimport { keys, urls } from './settings';\n\nconst getQuery = () => {\n  const query = [];\n\n  keys.forEach(key => {\n    const value = store.get(key);\n    if (!value) return;\n    query.push(key + '=' + encodeURIComponent(value));\n  });\n\n  return query.join('&');\n};\n\nconst store = new RssStore();\n\nstore.compute('code', keys, () => {\n  const query = getQuery().replace(/&/g, '&amp;');\n  return `<script src='${urls.base}/main.js?${query}'></script>`;\n});\n\nconst app = new App({\n  target: document.querySelector('main'),\n  store\n});\n\nconst query = location.search;\nlet url;\n\nif (query && query.startsWith('?url=')) {\n  const parts = query.substr(5).split('&');\n  url = parts[0];\n}\n\nstore.set({\n  appDescription: description,\n  appVersion: version,\n  boxFillColor: '#ffead2',\n  compact: false,\n  fontFace: '10pt sans-serif',\n  frameColor: '#b3a28e',\n  headless: false,\n  height: '',\n  linkColor: '#2c7395',\n  maxItems: 7,\n  radius: 5,\n  showXmlButton: true,\n  textColor: '#95412b',\n  titleBarColor: '#90a8b3',\n  titleBarTextColor: '#ffead2',\n  url: url || urls.default,\n  width: ''\n});\n\n// For debugging\n//window.store = store;\n\nexport default app;\n"],"names":["String","prototype","padStart","len","char","let","str","this","length","noop","assign","target","k","source","i","arguments","appendNode","node","appendChild","insertNode","anchor","insertBefore","detachNode","parentNode","removeChild","detachBetween","before","after","nextSibling","destroyEach","iterations","d","createElement","name","document","createSvgElement","createElementNS","createText","data","createTextNode","createComment","addListener","event","handler","addEventListener","removeListener","removeEventListener","setAttribute","attribute","value","setStyle","key","style","setProperty","blankObject","Object","create","destroy","detach","fire","set","get","_fragment","u","_state","differs","a","b","dispatchObservers","component","group","changed","newState","oldState","newValue","oldValue","callbacks","callback","__calling","call","init","options","_observers","pre","post","_handlers","_bind","root","store","observe","defer","push","cancel","index","indexOf","splice","callAll","fns","pop","removeFromStore","_remove","proto","eventName","handlers","slice","on","_set","_lock","_beforecreate","_oncreate","_aftercreate","teardown","_recompute","dirty","p","_mount","m","_unmount","Store","state","_changeHandlers","_dependents","_computed","_sortedComputedProperties","_add","props","_init","prop","_sortComputedProperties","cycles","computed","sorted","visited","visit","Error","c","deps","forEach","compute","fn","update","values","map","dep","apply","onchange","_changed","dependents","dependent","componentState","j","RssParser","const","DC_NAMESPACE","ISO_DATE_PATTERN","Array","getChildElement","parent","namespace","method","getText","textContent","error","addItemExtensions","item","enclosures","getElementsByTagName","category","url","getAttribute","title","enclosure","type","domain","content","getDate","millis","Date","parse","isNaN","replace","now","xml","doc","implementation","createDocument","DOMParser","parseFromString","window","ActiveXObject","async","loadXML","getDocument","documentElement","nodeName","rss","items","format","version","description","image","link","date","parseAtom","channel","imageUrl","width","height","text","trim","RegExp","parseScriptingNews","getAttributeNS","getElementsByTagNameNS","rights","textInput","input","parseRss","urls","base","app","proxy","referrers","keys","serviceUrl","rootUrl","location","protocol","default","localUrls","defaultError","loading","compact","headless","maxItems","message","RssStore","settings","super","month","getMonth","toString","day","hours","getHours","minutes","getMinutes","getFullYear","fetch","encodeURIComponent","then","res","ok","statusText","json","parser","JSON","headers","catch","s","t","src","goto","$appDescription","$appVersion","preventDefault","href","adsbygoogle","bytes","toFixed","Promise","fulfill","Image","onload","maxWidth","Math","min","factor","$headless","$image","$compact","$items","$textColor","$boxFillColor","$linkColor","$width","$frameColor","$radius","$fontFace","$input","$url","$format","$version","$titleBarTextColor","$title","$formattedDate","$link","$titleBarColor","$showXmlButton","load","$maxItems","$fontWeight","kb","endsWith","staticId","dynamicId","staticCss","dynamicCss","id","rel","head","fontWeight","color","rule","innerHTML","$height","loaded","float","open","display","hosts","reduce","accu","startsWith","host","split","hits","total","percentage","sort","referrer","checkValidity","reportValidity","reload","copy","select","execCommand","label","sibling","nextElementSibling","querySelector","click","$loading","$description","$code","query","join","getQuery","App","search","substr","appDescription","appVersion","boxFillColor","fontFace","frameColor","linkColor","radius","showXmlButton","textColor","titleBarColor","titleBarTextColor"],"mappings":"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"}